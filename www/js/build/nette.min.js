var Nette=Nette||{};Nette.addEvent=function(a,b,c){var d=a["on"+b];a["on"+b]=function(){return"function"==typeof d&&d.apply(a,arguments)===!1?!1:c.apply(a,arguments)}},Nette.getValue=function(a){var b,c;if(a){if(a.nodeName){if("select"===a.nodeName.toLowerCase()){var d=a.selectedIndex,e=a.options,f=[];if("select-one"===a.type)return 0>d?null:e[d].value;for(b=0,c=e.length;c>b;b++)e[b].selected&&f.push(e[b].value);return f}return"checkbox"===a.type?a.checked:"radio"===a.type?Nette.getValue(a.form.elements[a.name].nodeName?[a]:a.form.elements[a.name]):"file"===a.type?a.files||a.value:a.value.replace("\r","").replace(/^\s+|\s+$/g,"")}for(b=0,c=a.length;c>b;b++)if(a[b].checked)return a[b].value;return null}return null},Nette.getEffectiveValue=function(a){var b=Nette.getValue(a);return a.getAttribute&&b===a.getAttribute("data-nette-empty-value")&&(b=""),b},Nette.validateControl=function(a,b,c){a.nodeName||(a=a[0]),b=b||Nette.parseJSON(a.getAttribute("data-nette-rules"));for(var d=0,e=b.length;e>d;d++){var f=b[d],g=f.op.match(/(~)?([^?]+)/);f.neg=g[1],f.op=g[2],f.condition=!!f.rules;var h=f.control?a.form.elements[f.control]:a;h.nodeName||(h=h[0]);var i=Nette.validateRule(h,f.op,f.arg);if(null!==i)if(f.neg&&(i=!i),f.condition&&i){if(!Nette.validateControl(a,f.rules,c))return!1}else if(!f.condition&&!i){if(Nette.isDisabled(h))continue;if(!c){var j=Nette.isArray(f.arg)?f.arg:[f.arg],k=f.msg.replace(/%(value|\d+)/g,function(b,c){return Nette.getValue("value"===c?h:a.form.elements[j[c].control])});Nette.addError(h,k)}return!1}}return!0},Nette.validateForm=function(a){var b=a.form||a,c=!1;if(b["nette-submittedBy"]&&null!==b["nette-submittedBy"].getAttribute("formnovalidate")){var d=Nette.parseJSON(b["nette-submittedBy"].getAttribute("data-nette-validation-scope"));if(!d.length)return!0;c=new RegExp("^("+d.join("-|")+"-)")}var e,f,g={};for(e=0;e<b.elements.length;e++){if(f=b.elements[e],"radio"===f.type){if(g[f.name])continue;g[f.name]=!0}if(!(c&&!f.name.replace(/]\[|\[|]|$/g,"-").match(c)||Nette.isDisabled(f)||Nette.validateControl(f)))return!1}return!0},Nette.isDisabled=function(a){if("radio"===a.type){a=a.form.elements[a.name].nodeName?[a]:a.form.elements[a.name];for(var b=0;b<a.length;b++)if(!a[b].disabled)return!1;return!0}return a.disabled},Nette.addError=function(a,b){a.focus&&a.focus(),b&&alert(b)},Nette.expandRuleArgument=function(a,b){return b&&b.control&&(b=Nette.getEffectiveValue(a.form.elements[b.control])),b},Nette.validateRule=function(a,b,c){var d=Nette.getEffectiveValue(a);":"===b.charAt(0)&&(b=b.substr(1)),b=b.replace("::","_"),b=b.replace(/\\/g,"");for(var e=Nette.isArray(c)?c.slice(0):[c],f=0,g=e.length;g>f;f++)e[f]=Nette.expandRuleArgument(a,e[f]);return Nette.validators[b]?Nette.validators[b](a,Nette.isArray(c)?e:e[0],d):null},Nette.validators={filled:function(a,b,c){return""!==c&&c!==!1&&null!==c},blank:function(a,b,c){return!Nette.validators.filled(a,b,c)},valid:function(a){return Nette.validateControl(a,null,!0)},equal:function(a,b,c){if(void 0===b)return null;c=Nette.isArray(c)?c:[c],b=Nette.isArray(b)?b:[b];a:for(var d=0,e=c.length;e>d;d++){for(var f=0,g=b.length;g>f;f++)if(c[d]==b[f])continue a;return!1}return!0},notEqual:function(a,b,c){return void 0===b?null:!Nette.validators.equal(a,b,c)},minLength:function(a,b,c){return c.length>=b},maxLength:function(a,b,c){return c.length<=b},length:function(a,b,c){return b=Nette.isArray(b)?b:[b,b],(null===b[0]||c.length>=b[0])&&(null===b[1]||c.length<=b[1])},email:function(a,b,c){return/^("([ !\x23-\x5B\x5D-\x7E]*|\\[ -~])+"|[-a-z0-9!#$%&'*+\/=?^_`{|}~]+(\.[-a-z0-9!#$%&'*+\/=?^_`{|}~]+)*)@([0-9a-z\u00C0-\u02FF\u0370-\u1EFF]([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,61}[0-9a-z\u00C0-\u02FF\u0370-\u1EFF])?\.)+[a-z\u00C0-\u02FF\u0370-\u1EFF][-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,17}[a-z\u00C0-\u02FF\u0370-\u1EFF]$/i.test(c)},url:function(a,b,c){return/^(https?:\/\/|(?=.*\.))([0-9a-z\u00C0-\u02FF\u0370-\u1EFF](([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,61}[0-9a-z\u00C0-\u02FF\u0370-\u1EFF])?\.)*[a-z\u00C0-\u02FF\u0370-\u1EFF][-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,17}[a-z\u00C0-\u02FF\u0370-\u1EFF]|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|\[[0-9a-f:]{3,39}\])(:\d{1,5})?(\/\S*)?$/i.test(c)},regexp:function(a,b,c){var d="string"==typeof b?b.match(/^\/(.*)\/([imu]*)$/):!1;if(d)try{return new RegExp(d[1],d[2].replace("u","")).test(c)}catch(e){}},pattern:function(a,b,c){try{return"string"==typeof b?new RegExp("^("+b+")$").test(c):null}catch(d){}},integer:function(a,b,c){return/^-?[0-9]+$/.test(c)},"float":function(a,b,c){return/^-?[0-9]*[.,]?[0-9]+$/.test(c)},range:function(a,b,c){return Nette.isArray(b)?(null===b[0]||parseFloat(c)>=b[0])&&(null===b[1]||parseFloat(c)<=b[1]):null},submitted:function(a){return a.form["nette-submittedBy"]===a},fileSize:function(a,b,c){if(window.FileList)for(var d=0;d<c.length;d++)if(c[d].size>b)return!1;return!0}},Nette.toggleForm=function(a,b){var c;for(Nette.toggles={},c=0;c<a.elements.length;c++)a.elements[c].nodeName.toLowerCase()in{input:1,select:1,textarea:1,button:1}&&Nette.toggleControl(a.elements[c],null,null,b);for(c in Nette.toggles)Nette.toggle(c,Nette.toggles[c])},Nette.toggleControl=function(a,b,c,d){b=b||Nette.parseJSON(a.getAttribute("data-nette-rules"));for(var e=!1,f=Object.prototype.hasOwnProperty,g=function(){Nette.toggleForm(a.form)},h=0,i=b.length;i>h;h++){var j=b[h],k=j.op.match(/(~)?([^?]+)/);if(j.neg=k[1],j.op=k[2],j.condition=!!j.rules,j.condition){var l=j.control?a.form.elements[j.control]:a,m=c;if(m!==!1){if(m=Nette.validateRule(l,j.op,j.arg),null===m)continue;j.neg&&(m=!m)}if(Nette.toggleControl(a,j.rules,m,d)||j.toggle){if(e=!0,d)for(var n=!document.addEventListener,o=l.nodeName?[l]:l,p=0;p<o.length;p++)Nette.addEvent(o[p],n&&l.type in{checkbox:1,radio:1}?"click":"change",g);for(var q in j.toggle||[])f.call(j.toggle,q)&&(Nette.toggles[q]=Nette.toggles[q]||m&&j.toggle[q])}}}return e},Nette.parseJSON=function(s){return s=s||"[]","{op"===s.substr(0,3)?eval("["+s+"]"):window.JSON&&window.JSON.parse?JSON.parse(s):eval(s)},Nette.toggle=function(a,b){var c=document.getElementById(a);c&&(c.style.display=b?"":"none")},Nette.initForm=function(a){a.noValidate="novalidate",Nette.addEvent(a,"submit",function(b){return Nette.validateForm(a)?void 0:(b&&b.stopPropagation?b.stopPropagation():window.event&&(event.cancelBubble=!0),!1)}),Nette.addEvent(a,"click",function(b){b=b||event;var c=b.target||b.srcElement;a["nette-submittedBy"]=c.type in{submit:1,image:1}?c:null}),Nette.toggleForm(a,!0)},Nette.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},Nette.addEvent(window,"load",function(){for(var a=0;a<document.forms.length;a++)Nette.initForm(document.forms[a])}),Nette.webalize=function(a){a=a.toLowerCase();var b,c,d="";for(b=0;b<a.length;b++)c=Nette.webalizeTable[a.charAt(b)],d+=c?c:a.charAt(b);return d.replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")},Nette.webalizeTable={á:"a",č:"c",ď:"d",é:"e",ě:"e",í:"i",ň:"n",ó:"o",ř:"r",š:"s",ť:"t",ú:"u",ů:"u",ý:"y",ž:"z"},function(a,b,c){if("function"!=typeof b)return console.error("nette.ajax.js: jQuery is missing, load it please");var d=function(){var a={self:this,initialized:!1,contexts:{},on:{init:{},load:{},prepare:{},before:{},start:{},success:{},complete:{},error:{}},fire:function(){var d=!0,e=Array.prototype.slice.call(arguments),f=e.shift(),g="string"==typeof f?f:f.name,h="object"==typeof f?f.off||{}:{};return e.push(a.self),b.each(a.on[g],function(f,g){if(g===c||-1!==b.inArray(f,h))return!0;var i=g.apply(a.contexts[f],e);return d=i===c||i}),d},requestHandler:function(b){!a.self.ajax({},this,b)},ext:function(d,e,f){for(;!f;)f="ext_"+Math.random(),a.contexts[f]&&(f=c);b.each(d,function(b,c){a.on[b][f]=c}),a.contexts[f]=b.extend(e?e:{},{name:function(){return f},ext:function(b,c){var d=a.contexts[b];if(!d&&c)throw"Extension '"+this.name()+"' depends on disabled extension '"+b+"'.";return d}})}};this.ext=function(d,e,f){if("object"==typeof d)a.ext(d,e);else{if(e===c)return a.contexts[d];if(e){if("string"==typeof d&&a.contexts[d]!==c)throw"Cannot override already registered nette-ajax extension '"+d+"'.";a.ext(e,f,d)}else b.each(["init","load","prepare","before","start","success","complete","error"],function(b,e){a.on[e][d]=c}),a.contexts[d]=c}return this},this.init=function(b,d){if(a.initialized)throw"Cannot initialize nette-ajax twice.";if("function"==typeof b)this.ext("init",null),this.ext("init",{load:b},d);else if("object"==typeof b)this.ext("init",null),this.ext("init",b,d);else if(b!==c)throw"Argument of init() can be function or function-hash only.";return a.initialized=!0,a.fire("init"),this.load(),this},this.load=function(){return a.fire("load",a.requestHandler),this},this.ajax=function(d,e,f){if(!d.nette&&e&&f){var g,h=b(e),i=d.nette={e:f,ui:e,el:h,isForm:h.is("form"),isSubmit:h.is("input[type=submit]")||h.is("button[type=submit]"),isImage:h.is("input[type=image]"),form:null};if(i.isSubmit||i.isImage?i.form=i.el.closest("form"):i.isForm&&(i.form=i.el),d.url||(d.url=i.form?i.form.attr("action"):e.href),d.type||(d.type=i.form?i.form.attr("method"):"get"),h.is("[data-ajax-off]")){var j=h.attr("data-ajax-off");d.off=0===j.indexOf("[")?h.data("ajaxOff"):-1!==j.indexOf(",")?j.split(","):-1!==j.indexOf(" ")?j.split(" "):j,"string"==typeof d.off&&(d.off=[d.off]),d.off=b.grep(b.each(d.off,function(a){return b.trim(a)}),function(a){return a.length})}}return a.fire({name:"prepare",off:d.off||{}},d),d.prepare&&d.prepare(d),g=d.beforeSend,d.beforeSend=function(b,d){var e=a.fire({name:"before",off:d.off||{}},b,d);return(e||e===c)&&g&&(e=g(b,d)),e},this.handleXHR(b.ajax(d),d)},this.handleXHR=function(b,c){return c=c||{},!b||"undefined"!=typeof b.statusText&&"canceled"===b.statusText||(b.done(function(b,d,e){a.fire({name:"success",off:c.off||{}},b,d,e)}).fail(function(b,d,e){a.fire({name:"error",off:c.off||{}},b,d,e)}).always(function(b,d){a.fire({name:"complete",off:c.off||{}},b,d)}),a.fire({name:"start",off:c.off||{}},b,c),c.start&&c.start(b,c)),b}};b.nette=new(b.extend(d,b.nette?b.nette:{})),b.fn.netteAjax=function(a,c){return b.nette.ajax(c||{},this[0],a)},b.fn.netteAjaxOff=function(){return this.off(".nette")},b.nette.ext("validation",{before:function(a,d){if(!d.nette)return!0;var e=d.nette,f=e.e,g=b.extend({keys:!0,url:!0,form:!0},d.validate||function(){if(e.el.is("[data-ajax-validate]")){var a=e.el.data("ajaxValidate");return a===!1?{keys:!1,url:!1,form:!1}:"object"==typeof a?a:void 0}}()||{}),h=!1;if(e.el.attr("data-ajax-pass")!==c&&(h=e.el.data("ajaxPass"),h="bool"==typeof h?h:!0),g.keys){var i=f.button||f.ctrlKey||f.shiftKey||f.altKey||f.metaKey;if(e.form){if(i&&e.isSubmit)return this.explicitNoAjax=!0,!1;if(e.isForm&&this.explicitNoAjax)return this.explicitNoAjax=!1,!1}else if(i)return!1}return g.form&&e.form&&(!e.isSubmit&&!e.isImage||e.el.attr("formnovalidate")===c)&&e.form.get(0).onsubmit&&e.form.get(0).onsubmit(f)===!1?(f.stopImmediatePropagation(),f.preventDefault(),!1):g.url&&/:|^#/.test(e.form?d.url:e.el.attr("href"))?!1:(h||(f.stopPropagation(),f.preventDefault()),!0)}},{explicitNoAjax:!1}),b.nette.ext("forms",{init:function(){var b;a.Nette&&(b=this.ext("snippets"))&&b.after(function(b){b.find("form").each(function(){a.Nette.initForm(this)})})},prepare:function(a){var c=a.nette;if(c&&c.form){var d=c.e,e=a.data||{},f={};if(c.isSubmit)f[c.el.attr("name")]=c.el.val()||"";else if(c.isImage){var g=c.el.offset(),h=c.el.attr("name"),i=[Math.max(0,d.pageX-g.left),Math.max(0,d.pageY-g.top)];-1!==h.indexOf("[",0)?f[h]=i:(f[h+".x"]=i[0],f[h+".y"]=i[1])}"string"!=typeof e&&(e=b.param(e)),f=b.param(f),a.data=c.form.serialize()+(f?"&"+f:"")+"&"+e}}}),b.nette.ext("snippets",{success:function(a){var c=[];if(a.snippets){for(var d in a.snippets){var e=this.getElement(d);e.get(0)&&c.push(e.get(0)),b.each(this.beforeQueue,function(a,b){"function"==typeof b&&b(e)}),this.updateSnippet(e,a.snippets[d]),b.each(this.afterQueue,function(a,b){"function"==typeof b&&b(e)})}var f=b(c).promise();b.each(this.completeQueue,function(a,b){"function"==typeof b&&f.done(b)})}}},{beforeQueue:[],afterQueue:[],completeQueue:[],before:function(a){this.beforeQueue.push(a)},after:function(a){this.afterQueue.push(a)},complete:function(a){this.completeQueue.push(a)},updateSnippet:function(a,b,c){"string"==typeof a&&(a=this.getElement(a)),a.is("title")?document.title=b:this.applySnippet(a,b,c)},getElement:function(a){return b("#"+this.escapeSelector(a))},applySnippet:function(a,b,c){!c&&a.is("[data-ajax-append]")?a.append(b):a.html(b)},escapeSelector:function(a){return a.replace(/[\!"#\$%&'\(\)\*\+,\.\/:;<=>\?@\[\\\]\^`\{\|\}~]/g,"\\$&")}}),b.nette.ext("redirect",{success:function(b){return b.redirect?(a.location.href=b.redirect,!1):void 0}}),b.nette.ext("state",{success:function(a){a.state&&(this.state=a.state)}},{state:null}),b.nette.ext("unique",{start:function(a){this.xhr&&this.xhr.abort(),this.xhr=a},complete:function(){this.xhr=null}},{xhr:null}),b.nette.ext("abort",{init:function(){b("body").keydown(b.proxy(function(a){this.xhr&&"27"===a.keyCode.toString()&&!(a.ctrlKey||a.shiftKey||a.altKey||a.metaKey)&&this.xhr.abort()},this))},start:function(a){this.xhr=a},complete:function(){this.xhr=null}},{xhr:null}),b.nette.ext("load",{success:function(){b.nette.load()}}),b.nette.ext("init",{load:function(a){b(this.linkSelector).off("click.nette",a).on("click.nette",a),b(this.formSelector).off("submit.nette",a).on("submit.nette",a).off("click.nette",":image",a).on("click.nette",":image",a).off("click.nette",":submit",a).on("click.nette",":submit",a),b(this.buttonSelector).closest("form").off("click.nette",this.buttonSelector,a).on("click.nette",this.buttonSelector,a)}},{linkSelector:"a.ajax",formSelector:"form.ajax",buttonSelector:'input.ajax[type="submit"], button.ajax[type="submit"], input.ajax[type="image"]'})}(window,window.jQuery);