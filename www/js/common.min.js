!function(a){"use strict";("undefined"==typeof console||"undefined"==typeof console.log)&&(console={},console.log=function(){}),a.fn.tagsManager=function(b,c){var d=this,e="",f={prefilled:null,CapitalizeFirstLetter:!1,preventSubmitOnEnter:!0,isClearInputOnEsc:!0,AjaxPush:null,AjaxPushAllTags:null,AjaxPushParameters:null,delimiters:[9,13,44],backspace:[8],maxTags:0,hiddenTagListName:null,hiddenTagListId:null,replace:!0,output:null,deleteTagsOnBackspace:!0,tagsContainer:null,tagCloseIcon:"x",tagClass:"",validator:null,onlyTagList:!1};if(!(0 in this))return this;if("string"==typeof b?f=d.data("tm_options"):(a.extend(f,b),d.data("tm_options",f)),"string"==typeof b)e=d.data("tm_rndid");else{for(var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",h=0;5>h;h++)e+=g.charAt(Math.floor(Math.random()*g.length));d.data("tm_rndid",e)}if(f.replace===!0&&null===f.hiddenTagListName){var i=d.attr("name");f.hiddenTagListName=i,d.attr("name","display-"+e)}null===f.hiddenTagListName&&(f.hiddenTagListName="hidden-"+e);var j=f.delimeters||f.delimiters,k=[9,13,17,18,19,37,38,39,40],l=[],m=[];a.each(j,function(b,c){-1!=a.inArray(c,k)?m.push(c):l.push(c)});var n=String.fromCharCode(l[0]||44),o=f.backspace,p="tm-tag",q="tm-input";a.isFunction(f.validator)&&d.data("validator",f.validator);var r=function(){var b=p;return d.attr("class")&&a.each(d.attr("class").split(" "),function(a,c){-1!=c.indexOf(q+"-")&&(b+=" "+p+c.substring(q.length))}),b+=f.tagClass?" "+f.tagClass:""},s=function(b){b=a.trim(b);var c=0;for(c;c<b.length&&-1==a.inArray(b.charCodeAt(c),l);c++);return b.substring(0,c)},t=function(){var a=d.data("tlis");f.maxTags>0&&a.length<f.maxTags&&(d.show(),d.trigger("tm:show")),f.maxTags>0&&a.length>=f.maxTags&&(d.hide(),d.trigger("tm:hide"))},u=function(){var b=d.data("tlis"),c=d.data("tlid");if(c.length>0){var f=c.pop(),g=b[b.length-1];d.trigger("tm:popping",g),b.pop(),a("#"+e+"_"+f).remove(),w(),d.trigger("tm:popped",g)}t()},v=function(){for(var b=d.data("tlis"),c=d.data("tlid");c.length>0;){var f=c.pop();b.pop(),a("#"+e+"_"+f).remove(),w()}d.trigger("tm:emptied",null),t()},w=function(){var b=d.data("tlis"),c=d.data("lhiddenTagList");c&&a(c).val(b.join(n)).change(),d.trigger("tm:refresh",b.join(n))},x=function(b){var c=d.data("tlis"),f=d.data("tlid"),g=a.inArray(b,f);if(-1!=g){var h=c[g];d.trigger("tm:splicing",h),a("#"+e+"_"+b).remove(),c.splice(g,1),f.splice(g,1),w(),d.trigger("tm:spliced",h)}t()},y=function(b,c){if(f.AjaxPushAllTags&&("tm:pushed"!=b.type||-1==a.inArray(c,f.prefilled))){var e=d.data("tlis");a.post(f.AjaxPush,{tags:e.join(n)})}},z=function(b,c){if(b=s(b),b&&!(b.length<=0)&&(f.CapitalizeFirstLetter&&b.length>1&&(b=b.charAt(0).toUpperCase()+b.slice(1).toLowerCase()),!d.data("validator")||d.data("validator")(b))){var g=d.data("tlis"),h=d.data("tlid");if(!(f.maxTags>0&&g.length>=f.maxTags)){var i=!1,j=g.map(function(a){return a.toLowerCase()}),k=a.inArray(b.toLowerCase(),j);if(-1!=k&&(i=!0),i){var l=h[k];a("#"+e+"_"+l).stop().animate({backgroundColor:f.blinkBGColor_1},100).animate({backgroundColor:f.blinkBGColor_2},100).animate({backgroundColor:f.blinkBGColor_1},100).animate({backgroundColor:f.blinkBGColor_2},100).animate({backgroundColor:f.blinkBGColor_1},100).animate({backgroundColor:f.blinkBGColor_2},100)}else{c||d.trigger("tm:pushing",b);var m=Math.max.apply(null,h);m=m==-1/0?0:m;var n=++m;g.push(b),h.push(n),c||null!=f.AjaxPush&&-1==a.inArray(b,f.prefilled)&&a.post(f.AjaxPush,a.extend({tag:b},f.AjaxPushParameters));var o=e+"_"+n,p=e+"_Remover_"+n,q=a("<span></span>").text(b).html(),u='<span class="'+r()+'" id="'+o+'">';u+="<span>"+q+"</span>",u+='<a href="#" class="tm-tag-remove" id="'+p+'" TagIdToRemove="'+n+'">',u+=f.tagCloseIcon+"</a></span> ";var v=a(u);if(null!=f.tagsContainer)a(f.tagsContainer).append(v);else if(n>1){var y=n-1,z=a("#"+e+"_"+y);z.after(v)}else d.before(v);v.find("#"+p).on("click",d,function(b){b.preventDefault();var c=parseInt(a(this).attr("TagIdToRemove"));x(c,b.data)}),w(),c||d.trigger("tm:pushed",b),t()}d.val("")}}},A=function(b){a.each(b,function(a,b){z(b,!0)})},B=function(a){a.cancelBubble=!0,a.returnValue=!1,a.stopPropagation(),a.preventDefault()},C=function(b,c){return-1!=a.inArray(b.which,c)},D=function(a){z(d.val()),a.preventDefault()},E=null;return this.each(function(){if("string"!=typeof b){if(a(this).data("tagManager"))return!1;a(this).data("tagManager",!0);var e=new Array,g=new Array;if(d.data("tlis",e),d.data("tlid",g),null==f.output){var h=jQuery("<input/>",{type:"hidden",name:f.hiddenTagListName});d.after(h),d.data("lhiddenTagList",h)}else d.data("lhiddenTagList",jQuery(f.output));if(f.AjaxPushAllTags&&(d.on("tm:spliced",y),d.on("tm:popped",y),d.on("tm:pushed",y)),d.on("focus keypress",function(){a(this).popover&&a(this).popover("hide")}),f.isClearInputOnEsc&&d.on("keyup",function(b){27==b.which&&(a(this).val(""),B(b))}),d.on("keypress",function(a){C(a,l)&&D(a)}),d.on("keydown",function(a){13==a.which&&f.preventSubmitOnEnter&&B(a),C(a,m)&&D(a)}),f.deleteTagsOnBackspace&&d.on("keydown",function(b){C(b,o)&&a(this).val().length<=0&&(u(),B(b))}),d.change(function(b){/webkit/.test(navigator.userAgent.toLowerCase())||a(this).focus(),B(b)}),null!=f.prefilled)"object"==typeof f.prefilled?A(f.prefilled):"string"==typeof f.prefilled?A(f.prefilled.split(n)):"function"==typeof f.prefilled&&A(f.prefilled());else if(null!=f.output){if(jQuery(f.output)&&jQuery(f.output).val()){jQuery(f.output)}A(jQuery(f.output).val().split(n))}}else switch(b){case"empty":v();break;case"popTag":u();break;case"pushTag":z(c);break;case"tags":E={tags:d.data("tlis")}}}),E||(E=this),E}}(jQuery),function(a){"use strict";Date.now=Date.now||function(){return+new Date},a.ias=function(b){function c(){var b;if(u.onChangePage(function(a,b,c){v&&v.setPage(a,c),s.onPageChange.call(this,a,c,b)}),s.triggerPageThreshold>0)d();else if(a(s.next).attr("href")){var c=t.getCurrentScrollOffset(s.scrollContainer);q(function(){i(c)})}return v&&v.havePage()&&(f(),b=v.getPage(),t.forceScrollTop(function(){var c;b>1?(k(b),c=h(!0),a("html, body").scrollTop(c)):d()})),w}function d(){g(),s.scrollContainer.scroll(e)}function e(){var a,b;a=t.getCurrentScrollOffset(s.scrollContainer),b=h(),a>=b&&(l()>=s.triggerPageThreshold?(f(),q(function(){i(a)})):i(a))}function f(){s.scrollContainer.unbind("scroll",e)}function g(){a(s.pagination).hide()}function h(b){var c,d;return c=a(s.container).find(s.item).last(),0===c.size()?0:(d=c.offset().top+c.height(),b||(d+=s.thresholdMargin),d)}function i(b,c){var e;return(e=a(s.next).attr("href"))?(s.beforePageChange&&a.isFunction(s.beforePageChange)&&s.beforePageChange(b,e)===!1||(u.pushPages(b,e),f(),n(),j(e,function(b,h){var i,j=s.onLoadItems.call(this,h);j!==!1&&(a(h).hide(),i=a(s.container).find(s.item).last(),i.after(h),a(h).fadeIn()),e=a(s.next,b).attr("href"),a(s.pagination).replaceWith(a(s.pagination,b)),o(),g(),e?d():f(),s.onRenderComplete.call(this,h),c&&c.call(this)})),void 0):(s.noneleft&&a(s.container).find(s.item).last().after(s.noneleft),f())}function j(b,c,d){var e,f,g,h=[],i=Date.now();d=d||s.loaderDelay,a.get(b,null,function(b){e=a(s.container,b).eq(0),0===e.length&&(e=a(b).filter(s.container).eq(0)),e&&e.find(s.item).each(function(){h.push(this)}),c&&(g=this,f=Date.now()-i,d>f?setTimeout(function(){c.call(g,b,h)},d-f):c.call(g,b,h))},"html")}function k(b){var c=h(!0);c>0&&i(c,function(){f(),u.getCurPageNum(c)+1<b?(k(b),a("html,body").animate({scrollTop:c},400,"swing")):(a("html,body").animate({scrollTop:c},1e3,"swing"),d())})}function l(){var a=t.getCurrentScrollOffset(s.scrollContainer);return u.getCurPageNum(a)}function m(){var b=a(".ias_loader");return 0===b.size()&&(b=a('<div class="ias_loader">'+s.loader+"</div>"),b.hide()),b}function n(){var b,c=m();s.customLoaderProc!==!1?s.customLoaderProc(c):(b=a(s.container),b.after(c),c.fadeIn())}function o(){var a=m();a.remove()}function p(b){var c=a(".ias_trigger");return 0===c.size()&&(c=a('<div class="ias_trigger"><a href="#">'+s.trigger+"</a></div>"),c.hide()),a("a",c).unbind("click").bind("click",function(){return r(),b.call(),!1}),c}function q(b){var c,d=p(b);s.customTriggerProc!==!1?s.customTriggerProc(d):(c=a(s.container),c.after(d),d.fadeIn())}function r(){var a=p();a.remove()}var s=a.extend({},a.ias.defaults,b),t=new a.ias.util,u=new a.ias.paging(s.scrollContainer),v=s.history?new a.ias.history:!1,w=this;c()},a.ias.defaults={container:"#container",scrollContainer:a(window),item:".item",pagination:"#pagination",next:".next",noneleft:!1,loader:'<img src="images/loader.gif"/>',loaderDelay:600,triggerPageThreshold:3,trigger:"Load more items",thresholdMargin:0,history:!0,onPageChange:function(){},beforePageChange:function(){},onLoadItems:function(){},onRenderComplete:function(){},customLoaderProc:!1,customTriggerProc:!1},a.ias.util=function(){function b(){a(window).load(function(){c=!0})}var c=!1,d=!1,e=this;b(),this.forceScrollTop=function(b){a("html,body").scrollTop(0),d||(c?(b.call(),d=!0):setTimeout(function(){e.forceScrollTop(b)},1))},this.getCurrentScrollOffset=function(a){var b,c;return b=a.get(0)===window?a.scrollTop():a.offset().top,c=a.height(),b+c}},a.ias.paging=function(){function b(){a(window).scroll(c)}function c(){var b,c,f,j,k;b=i.getCurrentScrollOffset(a(window)),c=d(b),f=e(b),h!==c&&(j=f[0],k=f[1],g.call({},c,j,k)),h=c}function d(a){for(var b=f.length-1;b>0;b--)if(a>f[b][0])return b+1;return 1}function e(a){for(var b=f.length-1;b>=0;b--)if(a>f[b][0])return f[b];return null}var f=[[0,document.location.toString()]],g=function(){},h=1,i=new a.ias.util;b(),this.getCurPageNum=function(b){return b=b||i.getCurrentScrollOffset(a(window)),d(b)},this.onChangePage=function(a){g=a},this.pushPages=function(a,b){f.push([a,b])}},a.ias.history=function(){function a(){c=!!(window.history&&history.pushState&&history.replaceState),c=!1}var b=!1,c=!1;a(),this.setPage=function(a,b){this.updateState({page:a},"",b)},this.havePage=function(){return this.getState()!==!1},this.getPage=function(){var a;return this.havePage()?(a=this.getState(),a.page):1},this.getState=function(){var a,b,d;if(c){if(b=history.state,b&&b.ias)return b.ias}else if(a="#/page/"===window.location.hash.substring(0,7))return d=parseInt(window.location.hash.replace("#/page/",""),10),{page:d};return!1},this.updateState=function(a,c,d){b?this.replaceState(a,c,d):this.pushState(a,c,d)},this.pushState=function(a,d,e){var f;c?history.pushState({ias:a},d,e):(f=a.page>0?"#/page/"+a.page:"",window.location.hash=f),b=!0},this.replaceState=function(a,b,d){c?history.replaceState({ias:a},b,d):this.pushState(a,b,d)}}}(jQuery),function(){var a={jQuery:"http://code.jquery.com/jquery-latest.min.js"},b=function(){!function(a){a.fn.idTabs=function(){for(var b={},c=0;c<arguments.length;++c){var d=arguments[c];switch(d.constructor){case Object:a.extend(b,d);break;case Boolean:b.change=d;break;case Number:b.start=d;break;case Function:b.click=d;break;case String:"."==d.charAt(0)?b.selected=d:"!"==d.charAt(0)?b.event=d:b.start=d}}return"function"==typeof b["return"]&&(b.change=b["return"]),this.each(function(){a.idTabs(this,b)})},a.idTabs=function(b,c){var d=a.metadata?a(b).metadata():{},e=a.extend({},a.idTabs.settings,d,c);"."==e.selected.charAt(0)&&(e.selected=e.selected.substr(1)),"!"==e.event.charAt(0)&&(e.event=e.event.substr(1)),null==e.start&&(e.start=-1);var f=function(){if(a(this).is("."+e.selected))return e.change;var c="#"+this.href.split("#")[1],d=[],f=[];if(a("a",b).each(function(){this.href.match(/#/)&&(d.push(this),f.push("#"+this.href.split("#")[1]))}),e.click&&!e.click.apply(this,[c,f,b,e]))return e.change;for(i in d)a(d[i]).removeClass(e.selected);for(i in f)a(f[i]).hide();return a(this).addClass(e.selected),a(c).show(),e.change},g=a("a[href*='#']",b).unbind(e.event,f).bind(e.event,f);g.each(function(){a("#"+this.href.split("#")[1]).hide()});var h=!1;return(h=g.filter("."+e.selected)).length||"number"==typeof e.start&&(h=g.eq(e.start)).length||"string"==typeof e.start&&(h=g.filter("[href*='#"+e.start+"']")).length,h&&(h.removeClass(e.selected),h.trigger(e.event)),e},a.idTabs.settings={start:0,change:!1,click:null,selected:".selected",event:"!click"},a.idTabs.version="2.2",a(function(){a(".idTabs").idTabs()})}(jQuery)},c=function(a,b){for(b=b.split(".");a&&b.length;)a=a[b.shift()];return a},e=document.getElementsByTagName("head")[0],f=function(a){var b=document.createElement("script");b.type="text/javascript",b.src=a,e.appendChild(b)},g=document.getElementsByTagName("script"),h=g[g.length-1].src,j=!0;for(d in a)c(this,d)||(j=!1,f(a[d]));return j?b():(f(h),void 0)}(),function(a){"use strict";function b(a){if(a){if("string"==typeof d[a])return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(var b,e=0,f=c.length;f>e;e++)if(b=c[e]+a,"string"==typeof d[b])return b}}var c="Webkit Moz ms Ms O".split(" "),d=document.documentElement.style;"function"==typeof define&&define.amd?define(function(){return b}):a.getStyleProperty=b}(window),function(a){"use strict";function b(a){var b=parseFloat(a),c=-1===a.indexOf("%")&&!isNaN(b);return c&&b}function c(){for(var a={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},b=0,c=h.length;c>b;b++){var d=h[b];a[d]=0}return a}function d(a){function d(a){if("string"==typeof a&&(a=document.querySelector(a)),a&&"object"==typeof a&&a.nodeType){var d=g(a);if("none"===d.display)return c();var f={};f.width=a.offsetWidth,f.height=a.offsetHeight;for(var k=f.isBorderBox=!(!j||!d[j]||"border-box"!==d[j]),l=0,m=h.length;m>l;l++){var n=h[l],o=d[n];o=e(a,o);var p=parseFloat(o);f[n]=isNaN(p)?0:p}var q=f.paddingLeft+f.paddingRight,r=f.paddingTop+f.paddingBottom,s=f.marginLeft+f.marginRight,t=f.marginTop+f.marginBottom,u=f.borderLeftWidth+f.borderRightWidth,v=f.borderTopWidth+f.borderBottomWidth,w=k&&i,x=b(d.width);x!==!1&&(f.width=x+(w?0:q+u));var y=b(d.height);return y!==!1&&(f.height=y+(w?0:r+v)),f.innerWidth=f.width-(q+u),f.innerHeight=f.height-(r+v),f.outerWidth=f.width+s,f.outerHeight=f.height+t,f}}function e(a,b){if(f||-1===b.indexOf("%"))return b;var c=a.style,d=c.left,e=a.runtimeStyle,g=e&&e.left;return g&&(e.left=a.currentStyle.left),c.left=b,b=c.pixelLeft,c.left=d,g&&(e.left=g),b}var i,j=a("boxSizing");return function(){if(j){var a=document.createElement("div");a.style.width="200px",a.style.padding="1px 2px 3px 4px",a.style.borderStyle="solid",a.style.borderWidth="1px 2px 3px 4px",a.style[j]="border-box";var c=document.body||document.documentElement;c.appendChild(a);var d=g(a);i=200===b(d.width),c.removeChild(a)}}(),d}var e=document.defaultView,f=e&&e.getComputedStyle,g=f?function(a){return e.getComputedStyle(a,null)}:function(a){return a.currentStyle},h=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define(["get-style-property/get-style-property"],d):a.getSize=d(a.getStyleProperty)}(window),function(a){"use strict";var b=document.documentElement,c=function(){};b.addEventListener?c=function(a,b,c){a.addEventListener(b,c,!1)}:b.attachEvent&&(c=function(b,c,d){b[c+d]=d.handleEvent?function(){var b=a.event;b.target=b.target||b.srcElement,d.handleEvent.call(d,b)}:function(){var c=a.event;c.target=c.target||c.srcElement,d.call(b,c)},b.attachEvent("on"+c,b[c+d])});var d=function(){};b.removeEventListener?d=function(a,b,c){a.removeEventListener(b,c,!1)}:b.detachEvent&&(d=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});var e={bind:c,unbind:d};"function"==typeof define&&define.amd?define(e):a.eventie=e}(this),function(a){"use strict";function b(a){"function"==typeof a&&(b.isReady?a():f.push(a))}function c(a){var c="readystatechange"===a.type&&"complete"!==e.readyState;if(!b.isReady&&!c){b.isReady=!0;for(var d=0,g=f.length;g>d;d++){var h=f[d];h()}}}function d(d){return d.bind(e,"DOMContentLoaded",c),d.bind(e,"readystatechange",c),d.bind(a,"load",c),b}var e=a.document,f=[];b.isReady=!1,"function"==typeof define&&define.amd?(b.isReady="function"==typeof requirejs,define(["eventie/eventie"],d)):a.docReady=d(a.eventie)}(this),function(){"use strict";function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function c(a){return function(){return this[a].apply(this,arguments)}}var d=a.prototype;d.getListeners=function(a){var b,c,d=this._getEvents();if("object"==typeof a){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},d.flattenListeners=function(a){var b,c=[];for(b=0;a.length>b;b+=1)c.push(a[b].listener);return c},d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},d.addListener=function(a,c){var d,e=this.getListenersAsObject(a),f="object"==typeof c;for(d in e)e.hasOwnProperty(d)&&-1===b(e[d],c)&&e[d].push(f?c:{listener:c,once:!1});return this},d.on=c("addListener"),d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},d.once=c("addOnceListener"),d.defineEvent=function(a){return this.getListeners(a),this},d.defineEvents=function(a){for(var b=0;a.length>b;b+=1)this.defineEvent(a[b]);return this},d.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(d=b(f[e],c),-1!==d&&f[e].splice(d,1));return this},d.off=c("removeListener"),d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},d.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if("object"===c)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},d.removeAllListeners=c("removeEvent"),d.emitEvent=function(a,b){var c,d,e,f,g=this.getListenersAsObject(a);for(e in g)if(g.hasOwnProperty(e))for(d=g[e].length;d--;)c=g[e][d],c.once===!0&&this.removeListener(a,c.listener),f=c.listener.apply(this,b||[]),f===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this},d.trigger=c("emitEvent"),d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},d.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},d._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},d._getEvents=function(){return this._events||(this._events={})},"function"==typeof define&&define.amd?define(function(){return a}):"object"==typeof module&&module.exports?module.exports=a:this.EventEmitter=a}.call(this),function(a){"use strict";function b(){}function c(a){function c(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function e(b,c){a.fn[b]=function(e){if("string"==typeof e){for(var g=d.call(arguments,1),h=0,i=this.length;i>h;h++){var j=this[h],k=a.data(j,b);if(k)if(a.isFunction(k[e])&&"_"!==e.charAt(0)){var l=k[e].apply(k,g);if(void 0!==l)return l}else f("no such method '"+e+"' for "+b+" instance");else f("cannot call methods on "+b+" prior to initialization; attempted to call '"+e+"'")}return this}return this.each(function(){var d=a.data(this,b);d?(d.option(e),d._init()):(d=new c(this,e),a.data(this,b,d))})}}if(a){var f="undefined"==typeof console?b:function(a){console.error(a)};a.bridget=function(a,b){c(b),e(a,b)}}}var d=Array.prototype.slice;"function"==typeof define&&define.amd?define(["jquery"],c):c(a.jQuery)}(window),function(a,b){"use strict";function c(a,b){return a[h](b)}function d(a){if(!a.parentNode){var b=document.createDocumentFragment();b.appendChild(a)}}function e(a,b){d(a);for(var c=a.parentNode.querySelectorAll(b),e=0,f=c.length;f>e;e++)if(c[e]===a)return!0;return!1}function f(a,b){return d(a),c(a,b)}var g,h=function(){if(b.matchesSelector)return"matchesSelector";for(var a=["webkit","moz","ms","o"],c=0,d=a.length;d>c;c++){var e=a[c],f=e+"MatchesSelector";if(b[f])return f}}();if(h){var i=document.createElement("div"),j=c(i,"div");g=j?c:f}else g=e;"function"==typeof define&&define.amd?define(function(){return g}):window.matchesSelector=g}(this,Element.prototype),function(a){"use strict";function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){for(var b in a)return!1;return b=null,!0}function d(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function e(a,e,f){function h(a,b){a&&(this.element=a,this.layout=b,this.position={x:0,y:0},this._create())}var i=f("transition"),j=f("transform"),k=i&&j,l=!!f("perspective"),m={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[i],n=["transform","transition","transitionDuration","transitionProperty"],o=function(){for(var a={},b=0,c=n.length;c>b;b++){var d=n[b],e=f(d);e&&e!==d&&(a[d]=e)}return a}();b(h.prototype,a.prototype),h.prototype._create=function(){this._transition={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},h.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},h.prototype.getSize=function(){this.size=e(this.element)},h.prototype.css=function(a){var b=this.element.style;for(var c in a){var d=o[c]||c;b[d]=a[c]}},h.prototype.getPosition=function(){var a=g(this.element),b=this.layout.options,c=b.isOriginLeft,d=b.isOriginTop,e=parseInt(a[c?"left":"right"],10),f=parseInt(a[d?"top":"bottom"],10);e=isNaN(e)?0:e,f=isNaN(f)?0:f;var h=this.layout.size;e-=c?h.paddingLeft:h.paddingRight,f-=d?h.paddingTop:h.paddingBottom,this.position.x=e,this.position.y=f},h.prototype.layoutPosition=function(){var a=this.layout.size,b=this.layout.options,c={};b.isOriginLeft?(c.left=this.position.x+a.paddingLeft+"px",c.right=""):(c.right=this.position.x+a.paddingRight+"px",c.left=""),b.isOriginTop?(c.top=this.position.y+a.paddingTop+"px",c.bottom=""):(c.bottom=this.position.y+a.paddingBottom+"px",c.top=""),this.css(c),this.emitEvent("layout",[this])};var p=l?function(a,b){return"translate3d("+a+"px, "+b+"px, 0)"}:function(a,b){return"translate("+a+"px, "+b+"px)"};h.prototype._transitionTo=function(a,b){this.getPosition();var c=this.position.x,d=this.position.y,e=parseInt(a,10),f=parseInt(b,10),g=e===this.position.x&&f===this.position.y;if(this.setPosition(a,b),g&&!this.isTransitioning)return this.layoutPosition(),void 0;var h=a-c,i=b-d,j={},k=this.layout.options;h=k.isOriginLeft?h:-h,i=k.isOriginTop?i:-i,j.transform=p(h,i),this.transition({to:j,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},h.prototype.goTo=function(a,b){this.setPosition(a,b),this.layoutPosition()},h.prototype.moveTo=k?h.prototype._transitionTo:h.prototype.goTo,h.prototype.setPosition=function(a,b){this.position.x=parseInt(a,10),this.position.y=parseInt(b,10)},h.prototype._nonTransition=function(a){this.css(a.to),a.isCleaning&&this._removeStyles(a.to);for(var b in a.onTransitionEnd)a.onTransitionEnd[b].call(this)},h.prototype._transition=function(a){if(!parseFloat(this.layout.options.transitionDuration))return this._nonTransition(a),void 0;var b=this._transition;for(var c in a.onTransitionEnd)b.onEnd[c]=a.onTransitionEnd[c];for(c in a.to)b.ingProperties[c]=!0,a.isCleaning&&(b.clean[c]=!0);if(a.from){this.css(a.from);var d=this.element.offsetHeight;d=null}this.enableTransition(a.to),this.css(a.to),this.isTransitioning=!0};var q=j&&d(j)+",opacity";h.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:q,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(m,this,!1))},h.prototype.transition=h.prototype[i?"_transition":"_nonTransition"],h.prototype.onwebkitTransitionEnd=function(a){this.ontransitionend(a)},h.prototype.onotransitionend=function(a){this.ontransitionend(a)};var r={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};h.prototype.ontransitionend=function(a){if(a.target===this.element){var b=this._transition,d=r[a.propertyName]||a.propertyName;if(delete b.ingProperties[d],c(b.ingProperties)&&this.disableTransition(),d in b.clean&&(this.element.style[a.propertyName]="",delete b.clean[d]),d in b.onEnd){var e=b.onEnd[d];e.call(this),delete b.onEnd[d]}this.emitEvent("transitionEnd",[this])}},h.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(m,this,!1),this.isTransitioning=!1},h.prototype._removeStyles=function(a){var b={};for(var c in a)b[c]="";this.css(b)};var s={transitionProperty:"",transitionDuration:""};return h.prototype.removeTransitionStyles=function(){this.css(s)},h.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},h.prototype.remove=function(){if(!i||!parseFloat(this.layout.options.transitionDuration))return this.removeElem(),void 0;var a=this;this.on("transitionEnd",function(){return a.removeElem(),!0}),this.hide()},h.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var a=this.layout.options;this.transition({from:a.hiddenStyle,to:a.visibleStyle,isCleaning:!0})},h.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var a=this.layout.options;this.transition({from:a.visibleStyle,to:a.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.css({display:"none"})}}})},h.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},h}var f=document.defaultView,g=f&&f.getComputedStyle?function(a){return f.getComputedStyle(a,null)}:function(a){return a.currentStyle};"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],e):(a.Outlayer={},a.Outlayer.Item=e(a.EventEmitter,a.getSize,a.getStyleProperty))}(window),function(a){"use strict";function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){return"[object Array]"===l.call(a)}function d(a){var b=[];if(c(a))b=a;else if(a&&"number"==typeof a.length)for(var d=0,e=a.length;e>d;d++)b.push(a[d]);else b.push(a);return b}function e(a,b){var c=n(b,a);-1!==c&&b.splice(c,1)}function f(a){return a.replace(/(.)([A-Z])/g,function(a,b,c){return b+"-"+c}).toLowerCase()}function g(c,g,l,n,o,p){function q(a,c){if("string"==typeof a&&(a=h.querySelector(a)),!a||!m(a))return i&&i.error("Bad "+this.settings.namespace+" element: "+a),void 0;this.element=a,this.options=b({},this.options),this.option(c);var d=++s;this.element.outlayerGUID=d,t[d]=this,this._create(),this.options.isInitLayout&&this.layout()}function r(a,c){a.prototype[c]=b({},q.prototype[c])}var s=0,t={};return q.prototype.settings={namespace:"outlayer",item:p},q.prototype.options={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},b(q.prototype,l.prototype),q.prototype.option=function(a){b(this.options,a)},q.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),b(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},q.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},q.prototype._itemize=function(a){for(var b=this._filterFindItemElements(a),c=this.settings.item,d=[],e=0,f=b.length;f>e;e++){var g=b[e],h=new c(g,this);d.push(h)}return d},q.prototype._filterFindItemElements=function(a){a=d(a);for(var b=this.options.itemSelector,c=[],e=0,f=a.length;f>e;e++){var g=a[e];if(m(g))if(b){o(g,b)&&c.push(g);for(var h=g.querySelectorAll(b),i=0,j=h.length;j>i;i++)c.push(h[i])}else c.push(g)}return c},q.prototype.getItemElements=function(){for(var a=[],b=0,c=this.items.length;c>b;b++)a.push(this.items[b].element);return a},q.prototype.layout=function(){this._resetLayout(),this._manageStamps();var a=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,a),this._isLayoutInited=!0},q.prototype._init=q.prototype.layout,q.prototype._resetLayout=function(){this.getSize()},q.prototype.getSize=function(){this.size=n(this.element)},q.prototype._getMeasurement=function(a,b){var c,d=this.options[a];d?("string"==typeof d?c=this.element.querySelector(d):m(d)&&(c=d),this[a]=c?n(c)[b]:d):this[a]=0},q.prototype.layoutItems=function(a,b){a=this._getItemsForLayout(a),this._layoutItems(a,b),this._postLayout()},q.prototype._getItemsForLayout=function(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c];e.isIgnored||b.push(e)}return b},q.prototype._layoutItems=function(a,b){if(!a||!a.length)return this.emitEvent("layoutComplete",[this,a]),void 0;this._itemsOn(a,"layout",function(){this.emitEvent("layoutComplete",[this,a])});for(var c=[],d=0,e=a.length;e>d;d++){var f=a[d],g=this._getItemLayoutPosition(f);g.item=f,g.isInstant=b,c.push(g)}this._processLayoutQueue(c)},q.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},q.prototype._processLayoutQueue=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];this._positionItem(d.item,d.x,d.y,d.isInstant)}},q.prototype._positionItem=function(a,b,c,d){d?a.goTo(b,c):a.moveTo(b,c)},q.prototype._postLayout=function(){var a=this._getContainerSize();a&&(this._setContainerMeasure(a.width,!0),this._setContainerMeasure(a.height,!1))},q.prototype._getContainerSize=k,q.prototype._setContainerMeasure=function(a,b){if(void 0!==a){var c=this.size;c.isBorderBox&&(a+=b?c.paddingLeft+c.paddingRight+c.borderLeftWidth+c.borderRightWidth:c.paddingBottom+c.paddingTop+c.borderTopWidth+c.borderBottomWidth),a=Math.max(a,0),this.element.style[b?"width":"height"]=a+"px"}},q.prototype._itemsOn=function(a,b,c){function d(){return e++,e===f&&c.call(g),!0}for(var e=0,f=a.length,g=this,h=0,i=a.length;i>h;h++){var j=a[h];j.on(b,d)}},q.prototype.ignore=function(a){var b=this.getItem(a);b&&(b.isIgnored=!0)},q.prototype.unignore=function(a){var b=this.getItem(a);b&&delete b.isIgnored},q.prototype.stamp=function(a){if(a=this._find(a)){this.stamps=this.stamps.concat(a);for(var b=0,c=a.length;c>b;b++){var d=a[b];this.ignore(d)}}},q.prototype.unstamp=function(a){if(a=this._find(a))for(var b=0,c=a.length;c>b;b++){var d=a[b];e(d,this.stamps),this.unignore(d)}},q.prototype._find=function(a){return a?("string"==typeof a&&(a=this.element.querySelectorAll(a)),a=d(a)):void 0},q.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var a=0,b=this.stamps.length;b>a;a++){var c=this.stamps[a];this._manageStamp(c)}}},q.prototype._getBoundingRect=function(){var a=this.element.getBoundingClientRect(),b=this.size;this._boundingRect={left:a.left+b.paddingLeft+b.borderLeftWidth,top:a.top+b.paddingTop+b.borderTopWidth,right:a.right-(b.paddingRight+b.borderRightWidth),bottom:a.bottom-(b.paddingBottom+b.borderBottomWidth)}},q.prototype._manageStamp=k,q.prototype._getElementOffset=function(a){var b=a.getBoundingClientRect(),c=this._boundingRect,d=n(a),e={left:b.left-c.left-d.marginLeft,top:b.top-c.top-d.marginTop,right:c.right-b.right-d.marginRight,bottom:c.bottom-b.bottom-d.marginBottom};return e},q.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},q.prototype.bindResize=function(){this.isResizeBound||(c.bind(a,"resize",this),this.isResizeBound=!0)},q.prototype.unbindResize=function(){c.unbind(a,"resize",this),this.isResizeBound=!1},q.prototype.onresize=function(){function a(){b.resize(),delete b.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var b=this;this.resizeTimeout=setTimeout(a,100)},q.prototype.resize=function(){var a=n(this.element),b=this.size&&a;b&&a.innerWidth===this.size.innerWidth||this.layout()},q.prototype.addItems=function(a){var b=this._itemize(a);
return b.length&&(this.items=this.items.concat(b)),b},q.prototype.appended=function(a){var b=this.addItems(a);b.length&&(this.layoutItems(b,!0),this.reveal(b))},q.prototype.prepended=function(a){var b=this._itemize(a);if(b.length){var c=this.items.slice(0);this.items=b.concat(c),this._resetLayout(),this._manageStamps(),this.layoutItems(b,!0),this.reveal(b),this.layoutItems(c)}},q.prototype.reveal=function(a){if(a&&a.length)for(var b=0,c=a.length;c>b;b++){var d=a[b];d.reveal()}},q.prototype.hide=function(a){if(a&&a.length)for(var b=0,c=a.length;c>b;b++){var d=a[b];d.hide()}},q.prototype.getItem=function(a){for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];if(d.element===a)return d}},q.prototype.getItems=function(a){if(a&&a.length){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c],f=this.getItem(e);f&&b.push(f)}return b}},q.prototype.remove=function(a){a=d(a);var b=this.getItems(a);if(b&&b.length){this._itemsOn(b,"remove",function(){this.emitEvent("removeComplete",[this,b])});for(var c=0,f=b.length;f>c;c++){var g=b[c];g.remove(),e(g,this.items)}}},q.prototype.destroy=function(){var a=this.element.style;a.height="",a.position="",a.width="";for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];d.destroy()}this.unbindResize(),delete this.element.outlayerGUID,j&&j.removeData(this.element,this.settings.namespace)},q.data=function(a){var b=a&&a.outlayerGUID;return b&&t[b]},q.create=function(a,c){function d(){q.apply(this,arguments)}return b(d.prototype,q.prototype),r(d,"options"),r(d,"settings"),b(d.prototype.options,c),d.prototype.settings.namespace=a,d.data=q.data,d.Item=function(){p.apply(this,arguments)},d.Item.prototype=new p,d.prototype.settings.item=d.Item,g(function(){for(var b=f(a),c=h.querySelectorAll(".js-"+b),e="data-"+b+"-options",g=0,k=c.length;k>g;g++){var l,m=c[g],n=m.getAttribute(e);try{l=n&&JSON.parse(n)}catch(o){i&&i.error("Error parsing "+e+" on "+m.nodeName.toLowerCase()+(m.id?"#"+m.id:"")+": "+o);continue}var p=new d(m,l);j&&j.data(m,a,p)}}),j&&j.bridget&&j.bridget(a,d),d},q.Item=p,q}var h=a.document,i=a.console,j=a.jQuery,k=function(){},l=Object.prototype.toString,m="object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},n=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1};"function"==typeof define&&define.amd?define(["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],g):a.Outlayer=g(a.eventie,a.docReady,a.EventEmitter,a.getSize,a.matchesSelector,a.Outlayer.Item)}(window),function(a){"use strict";function b(a,b){var d=a.create("masonry");return d.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var a=this.cols;for(this.colYs=[];a--;)this.colYs.push(0);this.maxY=0},d.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var a=this.items[0],c=a&&a.element;this.columnWidth=c&&b(c).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},d.prototype.getContainerWidth=function(){var a=this.options.isFitWidth?this.element.parentNode:this.element,c=b(a);this.containerWidth=c&&c.innerWidth},d.prototype._getItemLayoutPosition=function(a){a.getSize();var b=Math.ceil(a.size.outerWidth/this.columnWidth);b=Math.min(b,this.cols);for(var d=this._getColGroup(b),e=Math.min.apply(Math,d),f=c(d,e),g={x:this.columnWidth*f,y:e},h=e+a.size.outerHeight,i=this.cols+1-d.length,j=0;i>j;j++)this.colYs[f+j]=h;return g},d.prototype._getColGroup=function(a){if(2>a)return this.colYs;for(var b=[],c=this.cols+1-a,d=0;c>d;d++){var e=this.colYs.slice(d,d+a);b[d]=Math.max.apply(Math,e)}return b},d.prototype._manageStamp=function(a){var c=b(a),d=this._getElementOffset(a),e=this.options.isOriginLeft?d.left:d.right,f=e+c.outerWidth,g=Math.floor(e/this.columnWidth);g=Math.max(0,g);var h=Math.floor(f/this.columnWidth);h=Math.min(this.cols-1,h);for(var i=(this.options.isOriginTop?d.top:d.bottom)+c.outerHeight,j=g;h>=j;j++)this.colYs[j]=Math.max(i,this.colYs[j])},d.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var a={height:this.maxY};return this.options.isFitWidth&&(a.width=this._getContainerFitWidth()),a},d.prototype._getContainerFitWidth=function(){for(var a=0,b=this.cols;--b&&0===this.colYs[b];)a++;return(this.cols-a)*this.columnWidth-this.gutter},d.prototype.resize=function(){var a=this.containerWidth;this.getContainerWidth(),a!==this.containerWidth&&this.layout()},d}var c=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];if(e===b)return c}return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],b):a.Masonry=b(a.Outlayer,a.getSize)}(window),function(a,b,c,d){"use strict";function e(a,b){this.element=a,"object"==typeof this.element&&"object"==typeof b&&isNaN(b.zIndex)&&"auto"===b.zIndex&&(b.zIndex=this._isIE()?g.zIndex:this._zIndex()),this.settings=this._extend({},g,b),"object"==typeof this.element?this._box.init(this):this[this.element]()}var f="custombox",g={url:null,cache:!1,escKey:!0,eClose:null,zIndex:9999,overlay:!0,overlayColor:"#000",overlayOpacity:.8,overlayClose:!0,overlaySpeed:200,customClass:null,width:null,height:null,effect:"fadein",position:null,speed:600,open:null,complete:null,close:null,responsive:!0,scrollbar:!1,error:"Error 404!"};e.prototype={_overlay:function(){var a=this._hexToRgb(this.settings.overlayColor),b={};-1!=navigator.appVersion.indexOf("MSIE 8.")?(b.backgroundColor=this.settings.overlayColor,b.zIndex=parseFloat(this.settings.zIndex)+1,b.filter="alpha(opacity="+100*this.settings.overlayOpacity+")"):(b["background-color"]="rgba("+a.r+","+a.g+", "+a.b+","+this.settings.overlayOpacity+")",b["z-index"]=parseFloat(this.settings.zIndex)+1,b.transition="all "+this.settings.overlaySpeed/1e3+"s"),c.getElementsByTagName("body")[0].appendChild(this._create({id:"overlay",eClass:"overlay"},b))},_box:{init:function(a){a.settings.open&&"function"==typeof a.settings.open&&a.settings.open(d!==arguments[0]?arguments[0]:""),null===a.settings.url&&null!==a.element&&(a.settings.url=a.element.getAttribute("href")),"string"==typeof a.settings.url?"#"===a.settings.url.charAt(0)||"."===a.settings.url.charAt(0)?c.querySelector(a.settings.url)?a._box.build(a,c.querySelector(a.settings.url).cloneNode(!0)):a._box.build(a,null):this.ajax(a):a._box.build(a,null)},create:function(a){var b={};a._isIE()?b.zIndex=parseFloat(a.settings.zIndex)+2:b["z-index"]=parseFloat(a.settings.zIndex)+2;var d=a._create({id:"modal",eClass:"modal "+a._box.effect(a)+(a.settings.customClass?" "+a.settings.customClass:"")},b),e=a._create({id:"modal-content",eClass:"modal-content"},{"transition-duration":a.settings.speed+"ms"});return d.appendChild(e),c.body.insertBefore(d,c.body.firstChild),a.settings.overlay&&a._overlay(),[d,e]},effect:function(a){var b=["slide","flip","rotate"],d=["letmein","makeway","slip","blur"],e=f+"-"+a.settings.effect,g="";null!==a.settings.position&&-1!==a.settings.position.indexOf(",")&&(a.settings.position=a.settings.position.split(","),a.settings.position.length>1&&(g=" "+f+"-"+a.settings.effect+"-"+a.settings.position[0].replace(/^\s+|\s+$/g,"")+"-"+a.settings.position[1].replace(/^\s+|\s+$/g,"")));for(var h=0,i=b.length;i>h;h++)b[h]===a.settings.effect&&(e=f+"-"+a.settings.effect+"-"+(""!==g?a.settings.position[0]:a.settings.position)+g);for(var j=0,k=d.length;k>j;j++)if(d[j]===a.settings.effect){"blur"!==a.settings.effect&&a._addClass(c.getElementsByTagName("html")[0],"perspective");var l=c.createElement("div");for(l.className=f+"-container";c.body.firstChild;)l.appendChild(c.body.firstChild);c.body.appendChild(l)}return e},build:function(a,e){var g=c.body,h=c.documentElement,i=h&&h.scrollTop||g&&g.scrollTop||0;if(a.settings.error!==!1&&"string"==typeof a.settings.error){null===e&&(e=c.createElement("div"),a._addClass(e,"error"),e.innerHTML=a.settings.error);var j=a._box.create(a);j[1].appendChild(e),e.style.display="block",j[0].setAttribute("data-"+f+"-scroll",i);var k={width:parseInt(a.settings.width,0),height:parseInt(a.settings.height,0)};isNaN(k.width)||k.width!==a.settings.width||k.width.toString()!==a.settings.width.toString()||null===k.width||(e.style.width=k.width+"px"),isNaN(k.height)||k.height!==a.settings.height||k.height.toString()!==a.settings.height.toString()||null===k.height||(e.style.height=k.height+"px");var l={"margin-left":-e.offsetWidth/2+"px",width:e.offsetWidth+"px"};null!==a.settings.position&&-1!==a.settings.position.indexOf("top")&&(l.transform="none"),a._create({},l,j[0]);var m={width:"innerWidth"in b?b.innerWidth:c.documentElement.offsetWidth,height:"innerHeight"in b?b.innerHeight:c.documentElement.offsetHeight};if(a.settings.scrollbar)a._scrollbar(j[0]);else if(e.offsetHeight<m.height){var n=a._create({},{visibility:"hidden",width:"100px"});g.appendChild(n);var o=n.offsetWidth;n.style.overflow="scroll";var p=a._create({},{width:"100%"});n.appendChild(p);var q=p.offsetWidth;n.parentNode.removeChild(n),g.style.marginRight=o-q+"px",a._addClass(c.getElementsByTagName("html")[0],"hide-scrollbar")}else a._scrollbar(j[0]);a.settings.responsive&&a._box.responsive(a,j,e,m),setTimeout(function(){a._listeners(i),j[0].className+=" "+f+"-show";for(var c=j[1].getElementsByTagName("script"),e=0,g=c.length;g>e;e++)new Function(c[e].text)();if(b.attachEvent)setTimeout(function(){a.settings.complete&&"function"==typeof a.settings.complete&&a.settings.complete(d!==arguments[0]?arguments[0]:"")},a.settings.speed);else{var h=!0;j[0].addEventListener(a._crossBrowser(),function(){h&&(h=!1,a.settings.complete&&"function"==typeof a.settings.complete&&a.settings.complete(d!==arguments[0]?arguments[0]:""))},!1)}},a.settings.overlay?a.settings.overlaySpeed:200)}},responsive:function(a,c,d,e){d.setAttribute("data-"+f+"-width",d.offsetWidth),a._create({},{width:"auto"},d),e.width<d.offsetWidth&&a._create({},{width:e.width-40+"px","margin-left":"20px","margin-right":"20px",left:0},c[0]);var g="onorientationchange"in b,h=g?"orientationchange":"resize";b.attachEvent?b.attachEvent(h,function(){i(this)},!1):b.addEventListener(h,function(){i(this)},!1);var i=function(e){if("undefined"==typeof b.orientation){if(null!==d.getAttribute("data-"+f+"-width")){var g=d.getAttribute("data-"+f+"-width");g>e.innerWidth?a._create({},{width:e.innerWidth-40+"px","margin-left":"20px","margin-right":"20px",left:0},c[0]):a._create({},{width:g+"px","margin-left":-g/2+"px",left:"50%"},c[0])}}else a._create(null,{width:e.innerWidth-40+"px","margin-left":"20px","margin-right":"20px",left:0},c[0])}},ajax:function(a){var b=new XMLHttpRequest;b.onreadystatechange=function(){var d=4;if(b.readyState===d)if(200===b.status){var e=c.createElement("div");e.innerHTML=b.responseText,a._box.build(a,e)}else a._box.build(a,null)},b.open("GET",a.settings.url+(a.settings.cache?"":"?_="+(new Date).getTime()),!0),b.setRequestHeader("X-Requested-With","XMLHttpRequest"),b.send(null)}},_close:function(){var a=this;setTimeout(function(){a._removeClass(c.getElementsByTagName("html")[0],f+"-hide-scrollbar"),c.getElementsByTagName("body")[0].style.marginRight=0;var e=a._isIE()?c.querySelectorAll("."+f+"-modal")[0]:c.getElementsByClassName(f+"-modal")[0];if(a._remove(e),a.settings.overlay&&a._remove(a._isIE()?c.querySelectorAll("."+f+"-overlay")[0]:c.getElementsByClassName(f+"-overlay")[0]),a.settings.close&&"function"==typeof a.settings.close&&a.settings.close(d!==arguments[0]?arguments[0]:""),"undefined"!=typeof e&&null!==e.getAttribute("data-"+f)){var g=e.getAttribute("data-"+f),h=new Function("onClose","return "+g)(g);h()}b.top.scroll(0,e.getAttribute("data-"+f+"-scroll"))},a.settings.speed),a._addClass(a._isIE()?c.querySelectorAll("."+f+"-modal")[0]:c.getElementsByClassName(f+"-modal")[0],"close"),a._removeClass(a._isIE()?c.querySelectorAll("."+f+"-modal")[0]:c.getElementsByClassName(f+"-modal")[0],f+"-show"),a._removeClass(c.getElementsByTagName("html")[0],f+"-perspective")},_clean:function(){var a=this;a._removeClass(c.getElementsByTagName("html")[0],f+"-hide-scrollbar"),c.getElementsByTagName("body")[0].style.marginRight=0;var b=a._isIE()?c.querySelectorAll("."+f+"-modal")[0]:c.getElementsByClassName(f+"-modal")[0];if(a._remove(b),a.settings.overlay&&a._remove(a._isIE()?c.querySelectorAll("."+f+"-overlay")[0]:c.getElementsByClassName(f+"-overlay")[0]),a.settings.close&&"function"==typeof a.settings.close&&a.settings.close(d!==arguments[0]?arguments[0]:""),"undefined"!=typeof b&&null!==b.getAttribute("data-"+f)){var e=b.getAttribute("data-"+f),g=new Function("onClose","return "+e)(e);g()}},_listeners:function(){var a=this;if(a._isIE()?"undefined"!=typeof c.querySelectorAll("."+f+"-overlay")[0]&&a.settings.overlayClose&&c.querySelectorAll("."+f+"-overlay")[0].attachEvent("onclick",function(){a._close()}):"undefined"!=typeof c.getElementsByClassName(f+"-overlay")[0]&&a.settings.overlayClose&&c.getElementsByClassName(f+"-overlay")[0].addEventListener("click",function(){a._close()},!1),a.settings.escKey&&(c.onkeydown=function(c){c=c||b.event,27===c.keyCode&&a._close()}),(null!==a.settings.eClose&&"string"==typeof a.settings.eClose&&"#"===a.settings.eClose.charAt(0)||"string"==typeof a.settings.eClose&&"."===a.settings.eClose.charAt(0)&&c.querySelector(a.settings.eClose))&&c.querySelector(a.settings.eClose).addEventListener("click",function(){console.log("entro"),a._close()},!1),a.settings.close&&"function"==typeof a.settings.close){var d=a.settings.close,e=a._isIE()?c.querySelectorAll("."+f+"-modal")[0]:c.getElementsByClassName(f+"-modal")[0];e.setAttribute("data-"+f,d)}},_extend:function(){for(var a=1,b=arguments.length;b>a;a++)for(var c in arguments[a])arguments[a].hasOwnProperty(c)&&(arguments[0][c]=arguments[a][c]);return arguments[0]},_create:function(a,b,e){var g=e===d||null===e?c.createElement("div"):e;if(null!==a&&0!==Object.keys(a).length&&(null!==a.id&&(g.id=f+"-"+a.id+(new Date).getTime()),null!==a.eClass&&this._addClass(g,a.eClass)),null!==b)for(var h in b)if(b.hasOwnProperty(h)&&(this._isIE()?g.style[h]=b[h]:g.style.setProperty(h,b[h],null),(-1!==h.indexOf("transition")||"transform"===h!==-1)&&!this._isIE()))for(var i=["-webkit-","-ms-"],j=0,k=i.length;k>j;j++)g.style.setProperty(i[j]+h,b[h],null);return g},_hexToRgb:function(a){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(b,function(a,b,c,d){return b+b+c+c+d+d});var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return c?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:null},_addClass:function(a,b){this._hasClass(a,b)||(a.className=a.className.length&&" "!==a.className?a.className+" "+f+"-"+b:f+"-"+b)},_removeClass:function(a,b){if(this._hasClass(a,b)){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ")}},_hasClass:function(a,b){return a!==d?a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)")):!1},_remove:function(a){a!==d&&a.parentNode.removeChild(a)},_zIndex:function(){for(var a=c.getElementsByTagName("*"),b=0,d=0,e=a.length;e>d;d++){var f=c.defaultView.getComputedStyle(a[d],null).getPropertyValue("z-index");f>b&&"auto"!==f&&(b=f)}return b},_isIE:function(){return-1!=navigator.appVersion.indexOf("MSIE 9.")||-1!=navigator.appVersion.indexOf("MSIE 8.")},_crossBrowser:function(){var a,b=c.createElement("fakeelement"),e={transition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var f in e)e.hasOwnProperty(f)&&b.style[f]!==d&&(a=e[f]);return a},_scrollbar:function(a){var c=this;setTimeout(function(){b.scrollTo(0,0)},c.settings.overlay?c.settings.overlaySpeed:200);var d={position:"absolute"};null!==c.settings.position&&-1!==c.settings.position.indexOf("top")&&(d.top=0,d["margin-top"]="20px"),c._create({},d,a)},close:function(){this._close()}},a.fn[f]=function(b){var c=arguments,g="object"==typeof HTMLElement?b instanceof HTMLElement:b&&"object"==typeof b&&null!==b&&1===b.nodeType&&"string"==typeof b.nodeName;if(b===d||"object"==typeof b)if(g){if("Microsoft Internet Explorer"===navigator.appName){var h=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(null!=h.exec(navigator.userAgent))var i=parseInt(RegExp.$1)}if("undefined"==typeof i||i>=10){if(null!==b.getAttribute("data-"+f)&&parseInt(b.getAttribute("data-"+f))+1>Math.round((new Date).getTime()/1e3))return;b.setAttribute("data-"+f,Math.round((new Date).getTime()/1e3))}a(b).each(function(){a.data(this,f,new e(this,c[1]))})}else new e(null,c[0]);else"string"==typeof b&&"close"===b&&a.data(this,f,new e(c[0],c[1]))}}(jQuery,window,document),!function(a){var b="0.9.3",c={isMsie:function(){var a=/(msie) ([\w.]+)/i.exec(navigator.userAgent);return a?parseInt(a[2],10):!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"==typeof a},bind:a.proxy,bindAll:function(b){var c;for(var d in b)a.isFunction(c=b[d])&&(b[d]=a.proxy(c,b))},indexOf:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},each:a.each,map:a.map,filter:a.grep,every:function(b,c){var d=!0;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?void 0:!1}),!!d):d},some:function(b,c){var d=!1;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?!1:void 0}),!!d):d},mixin:a.extend,getUniqueId:function(){var a=0;return function(){return a++}}(),defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var f,g,h=this,i=arguments;return f=function(){d=null,c||(e=a.apply(h,i))},g=c&&!d,clearTimeout(d),d=setTimeout(f,b),g&&(e=a.apply(h,i)),e}},throttle:function(a,b){var c,d,e,f,g,h;return g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)},function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},tokenizeQuery:function(b){return a.trim(b).toLowerCase().split(/[\s]+/)},tokenizeText:function(b){return a.trim(b).toLowerCase().split(/[\s\-_]+/)},getProtocol:function(){return location.protocol},noop:function(){}},d=function(){var a=/\s+/;return{on:function(b,c){var d;if(!c)return this;for(this._callbacks=this._callbacks||{},b=b.split(a);d=b.shift();)this._callbacks[d]=this._callbacks[d]||[],this._callbacks[d].push(c);return this},trigger:function(b,c){var d,e;if(!this._callbacks)return this;for(b=b.split(a);d=b.shift();)if(e=this._callbacks[d])for(var f=0;f<e.length;f+=1)e[f].call(this,{type:d,data:c});return this}}}(),e=function(){function b(b){b&&b.el||a.error("EventBus initialized without el"),this.$el=a(b.el)}var d="typeahead:";return c.mixin(b.prototype,{trigger:function(a){var b=[].slice.call(arguments,1);this.$el.trigger(d+a,b)}}),b}(),f=function(){function a(a){this.prefix=["__",a,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function b(){return(new Date).getTime()}function d(a){return JSON.stringify(c.isUndefined(a)?null:a)}function e(a){return JSON.parse(a)}var f,g;try{f=window.localStorage,f.setItem("~~~","!"),f.removeItem("~~~")}catch(h){f=null}return g=f&&window.JSON?{_prefix:function(a){return this.prefix+a},_ttlKey:function(a){return this._prefix(a)+this.ttlKey},get:function(a){return this.isExpired(a)&&this.remove(a),e(f.getItem(this._prefix(a)))},set:function(a,e,g){return c.isNumber(g)?f.setItem(this._ttlKey(a),d(b()+g)):f.removeItem(this._ttlKey(a)),f.setItem(this._prefix(a),d(e))},remove:function(a){return f.removeItem(this._ttlKey(a)),f.removeItem(this._prefix(a)),this},clear:function(){var a,b,c=[],d=f.length;for(a=0;d>a;a++)(b=f.key(a)).match(this.keyMatcher)&&c.push(b.replace(this.keyMatcher,""));for(a=c.length;a--;)this.remove(c[a]);return this},isExpired:function(a){var d=e(f.getItem(this._ttlKey(a)));return c.isNumber(d)&&b()>d?!0:!1}}:{get:c.noop,set:c.noop,remove:c.noop,clear:c.noop,isExpired:c.noop},c.mixin(a.prototype,g),a}(),g=function(){function a(a){c.bindAll(this),a=a||{},this.sizeLimit=a.sizeLimit||10,this.cache={},this.cachedKeysByAge=[]}return c.mixin(a.prototype,{get:function(a){return this.cache[a]},set:function(a,b){var c;this.cachedKeysByAge.length===this.sizeLimit&&(c=this.cachedKeysByAge.shift(),delete this.cache[c]),this.cache[a]=b,this.cachedKeysByAge.push(a)}}),a}(),h=function(){function b(a){c.bindAll(this),a=c.isString(a)?{url:a}:a,i=i||new g,h=c.isNumber(a.maxParallelRequests)?a.maxParallelRequests:h||6,this.url=a.url,this.wildcard=a.wildcard||"%QUERY",this.filter=a.filter,this.replace=a.replace,this.ajaxSettings={type:"get",cache:a.cache,timeout:a.timeout,dataType:a.dataType||"json",beforeSend:a.beforeSend},this._get=(/^throttle$/i.test(a.rateLimitFn)?c.throttle:c.debounce)(this._get,a.rateLimitWait||300)}function d(){j++}function e(){j--}function f(){return h>j}var h,i,j=0,k={};return c.mixin(b.prototype,{_get:function(a,b){function c(c){var e=d.filter?d.filter(c):c;b&&b(e),i.set(a,c)}var d=this;f()?this._sendRequest(a).done(c):this.onDeckRequestArgs=[].slice.call(arguments,0)},_sendRequest:function(b){function c(){e(),k[b]=null,f.onDeckRequestArgs&&(f._get.apply(f,f.onDeckRequestArgs),f.onDeckRequestArgs=null)}var f=this,g=k[b];return g||(d(),g=k[b]=a.ajax(b,this.ajaxSettings).always(c)),g},get:function(a,b){var d,e,f=this,g=encodeURIComponent(a||"");return b=b||c.noop,d=this.replace?this.replace(this.url,g):this.url.replace(this.wildcard,g),(e=i.get(d))?c.defer(function(){b(f.filter?f.filter(e):e)}):this._get(d,b),!!e}}),b}(),i=function(){function d(b){c.bindAll(this),c.isString(b.template)&&!b.engine&&a.error("no template engine specified"),b.local||b.prefetch||b.remote||a.error("one of local, prefetch, or remote is required"),this.name=b.name||c.getUniqueId(),this.limit=b.limit||5,this.minLength=b.minLength||1,this.header=b.header,this.footer=b.footer,this.valueKey=b.valueKey||"value",this.template=e(b.template,b.engine,this.valueKey),this.local=b.local,this.prefetch=b.prefetch,this.remote=b.remote,this.itemHash={},this.adjacencyList={},this.storage=b.name?new f(b.name):null}function e(a,b,d){var e,f;return c.isFunction(a)?e=a:c.isString(a)?(f=b.compile(a),e=c.bind(f.render,f)):e=function(a){return"<p>"+a[d]+"</p>"},e}var g={thumbprint:"thumbprint",protocol:"protocol",itemHash:"itemHash",adjacencyList:"adjacencyList"};return c.mixin(d.prototype,{_processLocalData:function(a){this._mergeProcessedData(this._processData(a))},_loadPrefetchData:function(d){function e(a){var b=d.filter?d.filter(a):a,e=m._processData(b),f=e.itemHash,h=e.adjacencyList;m.storage&&(m.storage.set(g.itemHash,f,d.ttl),m.storage.set(g.adjacencyList,h,d.ttl),m.storage.set(g.thumbprint,n,d.ttl),m.storage.set(g.protocol,c.getProtocol(),d.ttl)),m._mergeProcessedData(e)}var f,h,i,j,k,l,m=this,n=b+(d.thumbprint||"");return this.storage&&(f=this.storage.get(g.thumbprint),h=this.storage.get(g.protocol),i=this.storage.get(g.itemHash),j=this.storage.get(g.adjacencyList)),k=f!==n||h!==c.getProtocol(),d=c.isString(d)?{url:d}:d,d.ttl=c.isNumber(d.ttl)?d.ttl:864e5,i&&j&&!k?(this._mergeProcessedData({itemHash:i,adjacencyList:j}),l=a.Deferred().resolve()):l=a.getJSON(d.url).done(e),l},_transformDatum:function(a){var b=c.isString(a)?a:a[this.valueKey],d=a.tokens||c.tokenizeText(b),e={value:b,tokens:d};return c.isString(a)?(e.datum={},e.datum[this.valueKey]=a):e.datum=a,e.tokens=c.filter(e.tokens,function(a){return!c.isBlankString(a)}),e.tokens=c.map(e.tokens,function(a){return a.toLowerCase()}),e},_processData:function(a){var b=this,d={},e={};return c.each(a,function(a,f){var g=b._transformDatum(f),h=c.getUniqueId(g.value);d[h]=g,c.each(g.tokens,function(a,b){var d=b.charAt(0),f=e[d]||(e[d]=[h]);!~c.indexOf(f,h)&&f.push(h)})}),{itemHash:d,adjacencyList:e}},_mergeProcessedData:function(a){var b=this;c.mixin(this.itemHash,a.itemHash),c.each(a.adjacencyList,function(a,c){var d=b.adjacencyList[a];b.adjacencyList[a]=d?d.concat(c):c})},_getLocalSuggestions:function(a){var b,d=this,e=[],f=[],g=[];return c.each(a,function(a,b){var d=b.charAt(0);!~c.indexOf(e,d)&&e.push(d)}),c.each(e,function(a,c){var e=d.adjacencyList[c];return e?(f.push(e),(!b||e.length<b.length)&&(b=e),void 0):!1}),f.length<e.length?[]:(c.each(b,function(b,e){var h,i,j=d.itemHash[e];h=c.every(f,function(a){return~c.indexOf(a,e)}),i=h&&c.every(a,function(a){return c.some(j.tokens,function(b){return 0===b.indexOf(a)})}),i&&g.push(j)}),g)},initialize:function(){var b;return this.local&&this._processLocalData(this.local),this.transport=this.remote?new h(this.remote):null,b=this.prefetch?this._loadPrefetchData(this.prefetch):a.Deferred().resolve(),this.local=this.prefetch=this.remote=null,this.initialize=function(){return b},b},getSuggestions:function(a,b){function d(a){f=f.slice(0),c.each(a,function(a,b){var d,e=g._transformDatum(b);return d=c.some(f,function(a){return e.value===a.value}),!d&&f.push(e),f.length<g.limit}),b&&b(f)}var e,f,g=this,h=!1;a.length<this.minLength||(e=c.tokenizeQuery(a),f=this._getLocalSuggestions(e).slice(0,this.limit),f.length<this.limit&&this.transport&&(h=this.transport.get(a,d)),!h&&b&&b(f))}}),d}(),j=function(){function b(b){var d=this;c.bindAll(this),this.specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},this.$hint=a(b.hint),this.$input=a(b.input).on("blur.tt",this._handleBlur).on("focus.tt",this._handleFocus).on("keydown.tt",this._handleSpecialKeyEvent),c.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(a){d.specialKeyCodeMap[a.which||a.keyCode]||c.defer(d._compareQueryToInputValue)}):this.$input.on("input.tt",this._compareQueryToInputValue),this.query=this.$input.val(),this.$overflowHelper=e(this.$input)}function e(b){return a("<span></span>").css({position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:b.css("font-family"),fontSize:b.css("font-size"),fontStyle:b.css("font-style"),fontVariant:b.css("font-variant"),fontWeight:b.css("font-weight"),wordSpacing:b.css("word-spacing"),letterSpacing:b.css("letter-spacing"),textIndent:b.css("text-indent"),textRendering:b.css("text-rendering"),textTransform:b.css("text-transform")}).insertAfter(b)}function f(a,b){return a=(a||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),b=(b||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),a===b}return c.mixin(b.prototype,d,{_handleFocus:function(){this.trigger("focused")},_handleBlur:function(){this.trigger("blured")},_handleSpecialKeyEvent:function(a){var b=this.specialKeyCodeMap[a.which||a.keyCode];b&&this.trigger(b+"Keyed",a)},_compareQueryToInputValue:function(){var a=this.getInputValue(),b=f(this.query,a),c=b?this.query.length!==a.length:!1;c?this.trigger("whitespaceChanged",{value:this.query}):b||this.trigger("queryChanged",{value:this.query=a})},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(a){this.query=a},getInputValue:function(){return this.$input.val()},setInputValue:function(a,b){this.$input.val(a),!b&&this._compareQueryToInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(a){this.$hint.val(a)},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},isOverflow:function(){return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var a,b=this.$input.val().length,d=this.$input[0].selectionStart;return c.isNumber(d)?d===b:document.selection?(a=document.selection.createRange(),a.moveStart("character",-b),b===a.text.length):!0}}),b}(),k=function(){function b(b){c.bindAll(this),this.isOpen=!1,this.isEmpty=!0,this.isMouseOverDropdown=!1,this.$menu=a(b.menu).on("mouseenter.tt",this._handleMouseenter).on("mouseleave.tt",this._handleMouseleave).on("click.tt",".tt-suggestion",this._handleSelection).on("mouseover.tt",".tt-suggestion",this._handleMouseover)}function e(a){return a.data("suggestion")}var f={suggestionsList:'<span class="tt-suggestions"></span>'},g={suggestionsList:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"}};return c.mixin(b.prototype,d,{_handleMouseenter:function(){this.isMouseOverDropdown=!0},_handleMouseleave:function(){this.isMouseOverDropdown=!1},_handleMouseover:function(b){var c=a(b.currentTarget);this._getSuggestions().removeClass("tt-is-under-cursor"),c.addClass("tt-is-under-cursor")},_handleSelection:function(b){var c=a(b.currentTarget);this.trigger("suggestionSelected",e(c))},_show:function(){this.$menu.css("display","block")},_hide:function(){this.$menu.hide()},_moveCursor:function(a){var b,c,d,f;if(this.isVisible()){if(b=this._getSuggestions(),c=b.filter(".tt-is-under-cursor"),c.removeClass("tt-is-under-cursor"),d=b.index(c)+a,d=(d+1)%(b.length+1)-1,-1===d)return this.trigger("cursorRemoved"),void 0;-1>d&&(d=b.length-1),f=b.eq(d).addClass("tt-is-under-cursor"),this._ensureVisibility(f),this.trigger("cursorMoved",e(f))}},_getSuggestions:function(){return this.$menu.find(".tt-suggestions > .tt-suggestion")},_ensureVisibility:function(a){var b=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),c=this.$menu.scrollTop(),d=a.position().top,e=d+a.outerHeight(!0);0>d?this.$menu.scrollTop(c+d):e>b&&this.$menu.scrollTop(c+(e-b))},destroy:function(){this.$menu.off(".tt"),this.$menu=null},isVisible:function(){return this.isOpen&&!this.isEmpty},closeUnlessMouseIsOverDropdown:function(){this.isMouseOverDropdown||this.close()},close:function(){this.isOpen&&(this.isOpen=!1,this.isMouseOverDropdown=!1,this._hide(),this.$menu.find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor"),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(a){var b={left:"0",right:"auto"},c={left:"auto",right:" 0"};"ltr"===a?this.$menu.css(b):this.$menu.css(c)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getSuggestionUnderCursor:function(){var a=this._getSuggestions().filter(".tt-is-under-cursor").first();return a.length>0?e(a):null},getFirstSuggestion:function(){var a=this._getSuggestions().first();return a.length>0?e(a):null},renderSuggestions:function(b,d){var e,h,i,j,k,l="tt-dataset-"+b.name,m='<div class="tt-suggestion">%body</div>',n=this.$menu.find("."+l);0===n.length&&(h=a(f.suggestionsList).css(g.suggestionsList),n=a("<div></div>").addClass(l).append(b.header).append(h).append(b.footer).appendTo(this.$menu)),d.length>0?(this.isEmpty=!1,this.isOpen&&this._show(),i=document.createElement("div"),j=document.createDocumentFragment(),c.each(d,function(c,d){d.dataset=b.name,e=b.template(d.datum),i.innerHTML=m.replace("%body",e),k=a(i.firstChild).css(g.suggestion).data("suggestion",d),k.children().each(function(){a(this).css(g.suggestionChild)}),j.appendChild(k[0])}),n.show().find(".tt-suggestions").html(j)):this.clearSuggestions(b.name),this.trigger("suggestionsRendered")},clearSuggestions:function(a){var b=a?this.$menu.find(".tt-dataset-"+a):this.$menu.find('[class^="tt-dataset-"]'),c=b.find(".tt-suggestions");b.hide(),c.empty(),0===this._getSuggestions().length&&(this.isEmpty=!0,this._hide())}}),b}(),l=function(){function b(a){var b,d,f;c.bindAll(this),this.$node=e(a.input),this.datasets=a.datasets,this.dir=null,this.eventBus=a.eventBus,b=this.$node.find(".tt-dropdown-menu"),d=this.$node.find(".tt-query"),f=this.$node.find(".tt-hint"),this.dropdownView=new k({menu:b}).on("suggestionSelected",this._handleSelection).on("cursorMoved",this._clearHint).on("cursorMoved",this._setInputValueToSuggestionUnderCursor).on("cursorRemoved",this._setInputValueToQuery).on("cursorRemoved",this._updateHint).on("suggestionsRendered",this._updateHint).on("opened",this._updateHint).on("closed",this._clearHint).on("opened closed",this._propagateEvent),this.inputView=new j({input:d,hint:f}).on("focused",this._openDropdown).on("blured",this._closeDropdown).on("blured",this._setInputValueToQuery).on("enterKeyed tabKeyed",this._handleSelection).on("queryChanged",this._clearHint).on("queryChanged",this._clearSuggestions).on("queryChanged",this._getSuggestions).on("whitespaceChanged",this._updateHint).on("queryChanged whitespaceChanged",this._openDropdown).on("queryChanged whitespaceChanged",this._setLanguageDirection).on("escKeyed",this._closeDropdown).on("escKeyed",this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed",this._managePreventDefault).on("upKeyed downKeyed",this._moveDropdownCursor).on("upKeyed downKeyed",this._openDropdown).on("tabKeyed leftKeyed rightKeyed",this._autocomplete)
}function e(b){var c=a(g.wrapper),d=a(g.dropdown),e=a(b),f=a(g.hint);c=c.css(h.wrapper),d=d.css(h.dropdown),f.css(h.hint).css({backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}),e.data("ttAttrs",{dir:e.attr("dir"),autocomplete:e.attr("autocomplete"),spellcheck:e.attr("spellcheck"),style:e.attr("style")}),e.addClass("tt-query").attr({autocomplete:"off",spellcheck:!1}).css(h.query);try{!e.attr("dir")&&e.attr("dir","auto")}catch(i){}return e.wrap(c).parent().prepend(f).append(d)}function f(a){var b=a.find(".tt-query");c.each(b.data("ttAttrs"),function(a,d){c.isUndefined(d)?b.removeAttr(a):b.attr(a,d)}),b.detach().removeData("ttAttrs").removeClass("tt-query").insertAfter(a),a.remove()}var g={wrapper:'<span class="twitter-typeahead"></span>',hint:'<input class="tt-hint" type="text" autocomplete="off" spellcheck="off" disabled>',dropdown:'<span class="tt-dropdown-menu"></span>'},h={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},query:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"}};return c.isMsie()&&c.mixin(h.query,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),c.isMsie()&&c.isMsie()<=7&&(c.mixin(h.wrapper,{display:"inline",zoom:"1"}),c.mixin(h.query,{marginTop:"-1px"})),c.mixin(b.prototype,d,{_managePreventDefault:function(a){var b,c,d=a.data,e=!1;switch(a.type){case"tabKeyed":b=this.inputView.getHintValue(),c=this.inputView.getInputValue(),e=b&&b!==c;break;case"upKeyed":case"downKeyed":e=!d.shiftKey&&!d.ctrlKey&&!d.metaKey}e&&d.preventDefault()},_setLanguageDirection:function(){var a=this.inputView.getLanguageDirection();a!==this.dir&&(this.dir=a,this.$node.css("direction",a),this.dropdownView.setLanguageDirection(a))},_updateHint:function(){var a,b,d,e,f,g=this.dropdownView.getFirstSuggestion(),h=g?g.value:null,i=this.dropdownView.isVisible(),j=this.inputView.isOverflow();h&&i&&!j&&(a=this.inputView.getInputValue(),b=a.replace(/\s{2,}/g," ").replace(/^\s+/g,""),d=c.escapeRegExChars(b),e=new RegExp("^(?:"+d+")(.*$)","i"),f=e.exec(h),this.inputView.setHintValue(a+(f?f[1]:"")))},_clearHint:function(){this.inputView.setHintValue("")},_clearSuggestions:function(){this.dropdownView.clearSuggestions()},_setInputValueToQuery:function(){this.inputView.setInputValue(this.inputView.getQuery())},_setInputValueToSuggestionUnderCursor:function(a){var b=a.data;this.inputView.setInputValue(b.value,!0)},_openDropdown:function(){this.dropdownView.open()},_closeDropdown:function(a){this.dropdownView["blured"===a.type?"closeUnlessMouseIsOverDropdown":"close"]()},_moveDropdownCursor:function(a){var b=a.data;b.shiftKey||b.ctrlKey||b.metaKey||this.dropdownView["upKeyed"===a.type?"moveCursorUp":"moveCursorDown"]()},_handleSelection:function(a){var b="suggestionSelected"===a.type,d=b?a.data:this.dropdownView.getSuggestionUnderCursor();d&&(this.inputView.setInputValue(d.value),b?this.inputView.focus():a.data.preventDefault(),b&&c.isMsie()?c.defer(this.dropdownView.close):this.dropdownView.close(),this.eventBus.trigger("selected",d.datum,d.dataset))},_getSuggestions:function(){var a=this,b=this.inputView.getQuery();c.isBlankString(b)||c.each(this.datasets,function(c,d){d.getSuggestions(b,function(c){b===a.inputView.getQuery()&&a.dropdownView.renderSuggestions(d,c)})})},_autocomplete:function(a){var b,c,d,e,f;("rightKeyed"!==a.type&&"leftKeyed"!==a.type||(b=this.inputView.isCursorAtEnd(),c="ltr"===this.inputView.getLanguageDirection()?"leftKeyed"===a.type:"rightKeyed"===a.type,b&&!c))&&(d=this.inputView.getQuery(),e=this.inputView.getHintValue(),""!==e&&d!==e&&(f=this.dropdownView.getFirstSuggestion(),this.inputView.setInputValue(f.value),this.eventBus.trigger("autocompleted",f.datum,f.dataset)))},_propagateEvent:function(a){this.eventBus.trigger(a.type)},destroy:function(){this.inputView.destroy(),this.dropdownView.destroy(),f(this.$node),this.$node=null},setQuery:function(a){this.inputView.setQuery(a),this.inputView.setInputValue(a),this._clearHint(),this._clearSuggestions(),this._getSuggestions()}}),b}();!function(){var b,d={},f="ttView";b={initialize:function(b){function g(){var b,d=a(this),g=new e({el:d});b=c.map(h,function(a){return a.initialize()}),d.data(f,new l({input:d,eventBus:g=new e({el:d}),datasets:h})),a.when.apply(a,b).always(function(){c.defer(function(){g.trigger("initialized")})})}var h;return b=c.isArray(b)?b:[b],0===b.length&&a.error("no datasets provided"),h=c.map(b,function(a){var b=d[a.name]?d[a.name]:new i(a);return a.name&&(d[a.name]=b),b}),this.each(g)},destroy:function(){function b(){var b=a(this),c=b.data(f);c&&(c.destroy(),b.removeData(f))}return this.each(b)},setQuery:function(b){function c(){var c=a(this).data(f);c&&c.setQuery(b)}return this.each(c)}},jQuery.fn.typeahead=function(a){return b[a]?b[a].apply(this,[].slice.call(arguments,1)):b.initialize.apply(this,arguments)}}()}(window.jQuery),function(a){function b(a,b,e){var f=a[0],g=/er/.test(e)?p:/bl/.test(e)?n:l;if(active=e==q?{checked:f[l],disabled:f[n],indeterminate:"true"==a.attr(p)||"false"==a.attr(o)}:f[g],/^(ch|di|in)/.test(e)&&!active)c(a,g);else if(/^(un|en|de)/.test(e)&&active)d(a,g);else if(e==q)for(var g in active)active[g]?c(a,g,!0):d(a,g,!0);else b&&"toggle"!=e||(b||a[u]("ifClicked"),active?f[r]!==k&&d(a,g):c(a,g))}function c(b,c,e){var q=b[0],u=b.parent(),v=c==l,x=c==p,y=x?o:v?m:"enabled",z=f(q,y+g(q[r])),A=f(q,c+g(q[r]));if(!0!==q[c]){if(!e&&c==l&&q[r]==k&&q.name){var B=b.closest("form"),C='input[name="'+q.name+'"]',C=B.length?B.find(C):a(C);C.each(function(){this!==q&&a.data(this,i)&&d(a(this),c)})}x?(q[c]=!0,q[l]&&d(b,l,"force")):(e||(q[c]=!0),v&&q[p]&&d(b,p,!1)),h(b,v,c,e)}q[n]&&f(q,w,!0)&&u.find("."+j).css(w,"default"),u[s](A||f(q,c)),u[t](z||f(q,y)||"")}function d(a,b,c){var d=a[0],e=a.parent(),i=b==l,k=b==p,q=k?o:i?m:"enabled",u=f(d,q+g(d[r])),v=f(d,b+g(d[r]));!1!==d[b]&&((k||!c||"force"==c)&&(d[b]=!1),h(a,i,q,c)),!d[n]&&f(d,w,!0)&&e.find("."+j).css(w,"pointer"),e[t](v||f(d,b)||""),e[s](u||f(d,q))}function e(b,c){if(a.data(b,i)){var d=a(b);d.parent().html(d.attr("style",a.data(b,i).s||"")[u](c||"")),d.off(".i").unwrap(),a(v+'[for="'+b.id+'"]').add(d.closest(v)).off(".i")}}function f(b,c,d){return a.data(b,i)?a.data(b,i).o[c+(d?"":"Class")]:void 0}function g(a){return a.charAt(0).toUpperCase()+a.slice(1)}function h(a,b,c,d){d||(b&&a[u]("ifToggled"),a[u]("ifChanged")[u]("if"+g(c)))}var i="iCheck",j=i+"-helper",k="radio",l="checked",m="un"+l,n="disabled",o="determinate",p="in"+o,q="update",r="type",s="addClass",t="removeClass",u="trigger",v="label",w="cursor",x=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini/i.test(navigator.userAgent);a.fn[i]=function(f,g){var h=":checkbox, :"+k,m=a(),o=function(b){b.each(function(){var b=a(this);m=b.is(h)?m.add(b):m.add(b.find(h))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(f))return f=f.toLowerCase(),o(this),m.each(function(){"destroy"==f?e(this,"ifDestroyed"):b(a(this),!0,f),a.isFunction(g)&&g()});if("object"==typeof f||!f){var w=a.extend({checkedClass:l,disabledClass:n,indeterminateClass:p,labelHover:!0},f),y=w.handle,z=w.hoverClass||"hover",A=w.focusClass||"focus",B=w.activeClass||"active",C=!!w.labelHover,D=w.labelHoverClass||"hover",E=0|(""+w.increaseArea).replace("%","");return("checkbox"==y||y==k)&&(h=":"+y),-50>E&&(E=-50),o(this),m.each(function(){e(this);var f=a(this),g=this,h=g.id,m=-E+"%",o=100+2*E+"%",o={position:"absolute",top:m,left:m,display:"block",width:o,height:o,margin:0,padding:0,background:"#fff",border:0,opacity:0},m=x?{position:"absolute",visibility:"hidden"}:E?o:{position:"absolute",opacity:0},p="checkbox"==g[r]?w.checkboxClass||"icheckbox":w.radioClass||"i"+k,y=a(v+'[for="'+h+'"]').add(f.closest(v)),F=f.wrap('<div class="'+p+'"/>')[u]("ifCreated").parent().append(w.insert),o=a('<ins class="'+j+'"/>').css(o).appendTo(F);f.data(i,{o:w,s:f.attr("style")}).css(m),w.inheritClass&&F[s](g.className),w.inheritID&&h&&F.attr("id",i+"-"+h),"static"==F.css("position")&&F.css("position","relative"),b(f,!0,q),y.length&&y.on("click.i mouseenter.i mouseleave.i touchbegin.i touchend.i",function(c){var d=c[r],e=a(this);if(!g[n]){if("click"==d?b(f,!1,!0):C&&(/ve|nd/.test(d)?(F[t](z),e[t](D)):(F[s](z),e[s](D))),!x)return!1;c.stopPropagation()}}),f.on("click.i focus.i blur.i keyup.i keydown.i keypress.i",function(a){var b=a[r];return a=a.keyCode,"click"==b?!1:"keydown"==b&&32==a?(g[r]==k&&g[l]||(g[l]?d(f,l):c(f,l)),!1):("keyup"==b&&g[r]==k?!g[l]&&c(f,l):/us|ur/.test(b)&&F["blur"==b?t:s](A),void 0)}),o.on("click mousedown mouseup mouseover mouseout touchbegin.i touchend.i",function(a){var c=a[r],d=/wn|up/.test(c)?B:z;if(!g[n]){if("click"==c?b(f,!1,!0):(/wn|er|in/.test(c)?F[s](d):F[t](d+" "+B),y.length&&C&&d==z&&y[/ut|nd/.test(c)?t:s](D)),!x)return!1;a.stopPropagation()}})})}return this}}(jQuery),function(a){a.fn.extend({customSelect:function(b){if("undefined"==typeof document.body.style.maxHeight)return this;var c={customClass:"customSelect",mapClass:!0,mapStyle:!0},b=a.extend(c,b),d=b.customClass,e=function(b,c){var d=b.find(":selected"),e=c.children(":first"),g=d.html()||"&nbsp;";e.html(g),d.attr("disabled")?c.addClass(f("DisabledOption")):c.removeClass(f("DisabledOption")),setTimeout(function(){c.removeClass(f("Open")),a(document).off("mouseup."+f("Open"))},60)},f=function(a){return d+a};return this.each(function(){var c=a(this),g=a("<span />").addClass(f("Inner")),h=a("<span />");c.after(h.append(g)),h.addClass(d),b.mapClass&&h.addClass(c.attr("class")),b.mapStyle&&h.attr("style",c.attr("style")),c.addClass("hasCustomSelect").on("update",function(){e(c,h);var a=parseInt(c.outerWidth(),10)-(parseInt(h.outerWidth(),10)-parseInt(h.width(),10));h.css({display:"inline-block"});var b=h.outerHeight();c.attr("disabled")?h.addClass(f("Disabled")):h.removeClass(f("Disabled")),g.css({width:a,display:"inline-block"}),c.css({"-webkit-appearance":"menulist-button",width:h.outerWidth(),position:"absolute",opacity:0,height:b,fontSize:h.css("font-size")})}).on("change",function(){h.addClass(f("Changed")),e(c,h)}).on("keyup",function(a){h.hasClass(f("Open"))?(13==a.which||27==a.which)&&e(c,h):(c.blur(),c.focus())}).on("mousedown",function(){h.removeClass(f("Changed"))}).on("mouseup",function(b){h.hasClass(f("Open"))||(a("."+f("Open")).not(h).length>0&&"undefined"!=typeof InstallTrigger?c.focus():(h.addClass(f("Open")),b.stopPropagation(),a(document).one("mouseup."+f("Open"),function(b){b.target!=c.get(0)&&a.inArray(b.target,c.find("*").get())<0?c.blur():e(c,h)})))}).focus(function(){h.removeClass(f("Changed")).addClass(f("Focus"))}).blur(function(){h.removeClass(f("Focus")+" "+f("Open"))}).hover(function(){h.addClass(f("Hover"))},function(){h.removeClass(f("Hover"))}).trigger("update")})}})}(jQuery),jQuery&&function(a){a.fn.filePreuploader=function(){function b(a){if(a.contentDocument)return a.contentDocument;if(a.contentWindow)return a.contentWindow.document;if(a.document)return a.document;throw"Nothing!"}function c(b,c){return b.length?b:(a.error("Empty selection for: "+c),void 0)}function d(b,d){d.spinnerUrl||a.error("Unused require option 'spinnerUrl'."),d.snippet||a.error("Unused require option 'snippet'.");var e=a(b);return a(e).find(d.uploadWrapper).append(a("<span/>",{text:"Nevybrno"})),a(e).find(d.uploadWrapper+" :file").each(function(b,c){a(c).css({visibility:"hidden"}).change(function(b){var c=a(b.target).val();a(b.target).parent().find("span").text(c.substr(-20))})}),a(e).find(d.uploadWrapper).click(function(b){a(b.target).find(":file").click()}),a(e).find(d.uploadWrapper+" :file").on("change",function(){d.onChange(b)}),a(e).find(":checkbox").on("change",function(){d.onRemoveItem(b,a(this).parents("li.file"))}),a(e).find(":checkbox:checked").each(function(){d.onRemoveItem(b,a(this).parents("li.file"))}),d.autoSubmitBy&&a(e).parent().find(c(d.autoSubmitBy,d.autoSubmitBy)).css({visibility:"hidden",position:"absolute"}),b}function e(b){this.defaults={onChange:e.prototype.onChange,onRemoveItem:e.prototype.onRemoveItem,uploadWrapper:"li.file.new-file",uploaderName:"file-preuploader",autoSubmitBy:!1,version:"0.2"};var c=this;return this.each(function(){return"object"!=typeof b&&b?e.prototype[b]?e.prototype[b].apply(this,Array.prototype.slice.call(arguments,1)):(a.error("Method "+b+" does not exist on jQuery.filePreuploader"),void 0):d(this,a.fn.extend(c.defaults,b||{}))})}return e.prototype.onChange=function(d){var e=a(d).parents("form"),f=this,g=a("<iframe/>",{id:f.uploaderName,name:f.uploaderName,style:"display: none",width:500,height:500});e.attr("target",this.uploaderName),e.append(g),a("#"+this.uploaderName).load(function(){e.attr("target",null),c(e.find(f.snippet),f.snippet).html(a(f.snippet,b(this)).html()).ready(function(){a(f.uploadWrapper,this).click(function(b){a(b.target).find(":file").click()}),d=a(f.uploadWrapper,this),a(f.uploadWrapper+" :file",this).on("change",function(){f.onChange(d)}),a(":checkbox",this).on("change",function(){f.onRemoveItem(self,a(this).parents("li.file"))}),a(":checkbox:checked",this).each(function(){f.onRemoveItem(self,a(this).parents("li.file"))})})}),this.autoSubmitBy&&(e.find(f.uploadWrapper+" :file").parents("li.file").css({"background-image":'url("'+f.spinnerUrl+'")',"background-position":"center","background-repeat":"no-repeat"}),e.find(c(this.autoSubmitBy,this.autoSubmitBy)).click())},e.prototype.onRemoveItem=function(b,c){a(c).hide(500),console.log("onRmeoveItem",b,c)},e}()}(jQuery);